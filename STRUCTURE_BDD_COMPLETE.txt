================================================================================
                    STRUCTURE COMPLÈTE DE LA BASE DE DONNÉES
              SYSTÈME DE RAPPORTS SCOLAIRES - IEF LOUGA (SA2R)
================================================================================

ANALYSE COMPLÈTE DU FICHIER base.xlsx:
  - Onglet "2-Effectifs": 217 colonnes
  - Onglet "1-Gene&Finan": 69 colonnes
  - Onglet "3-CI&CMG&CFEE": 44 colonnes
  - Onglet "4-Personnel": 64 colonnes
  - Onglet "5-Mat&Mob": 256 colonnes
  
TOTAL: 650 COLONNES À NORMALISER EN BASE DE DONNÉES

Cette structure propose une normalisation complète en tables relationnelles.

================================================================================
TABLE PRINCIPALE : rapports
================================================================================
- id (PK)
- etablissement_id (FK → etablissements)
- annee_scolaire (varchar: 2024-2025)
- trimestre (enum: 1, 2, 3, annuel)
- date_rapport (date)
- statut (enum: brouillon, soumis, validé, rejeté)
- submitted_by (FK → users)
- submitted_at (timestamp)
- validated_by (FK → users)
- validated_at (timestamp)
- created_at
- updated_at

================================================================================
SECTION 1 : INFORMATIONS GÉNÉRALES ET FINANCIÈRES (69 colonnes)
Onglet Excel: "1-Gene&Finan"
================================================================================

### TABLE : rapport_info_directeur
- id (PK)
- rapport_id (FK)
- directeur_nom (varchar)
- directeur_contact_1 (varchar)
- directeur_contact_2 (varchar)
- directeur_email (varchar)
- distance_siege (decimal) -- Distance du siège

### TABLE : rapport_infrastructures_base
- id (PK)
- rapport_id (FK)

# CPE (Case des Tout-Petits)
- cpe_existe (boolean)
- cpe_nombre (int)

# Clôture
- cloture_existe (boolean)
- cloture_type (enum: dur, provisoire, haie, autre)

# Eau
- eau_existe (boolean)
- eau_type (enum: robinet, forage, puits, autre)

# Électricité
- electricite_existe (boolean)
- electricite_type (enum: SENELEC, solaire, groupe, autre)

# Connexion Internet
- connexion_internet_existe (boolean)
- connexion_internet_type (enum: fibre, 4G, satellite, autre)

# Cantine Scolaire
- cantine_existe (boolean)
- cantine_type (enum: state, partenaire, communauté, autre)

### TABLE : rapport_structures_communautaires
- id (PK)
- rapport_id (FK)

# CGE (Comité de Gestion de l'École)
- cge_existe (boolean)
- cge_hommes (int)
- cge_femmes (int)
- cge_total (int, calculé)
- cge_president_nom (varchar)
- cge_president_contact (varchar)
- cge_tresorier_nom (varchar)
- cge_tresorier_contact (varchar)

# G.Scol (Gouvernement Scolaire)
- gscol_existe (boolean)
- gscol_garcons (int)
- gscol_filles (int)
- gscol_total (int, calculé)
- gscol_president_nom (varchar)
- gscol_president_contact (varchar)

# APE (Association des Parents d'Élèves)
- ape_existe (boolean)
- ape_hommes (int)
- ape_femmes (int)
- ape_total (int, calculé)
- ape_president_nom (varchar)
- ape_president_contact (varchar)

# AME (Association des Mères d'Élèves)
- ame_existe (boolean)
- ame_president_nom (varchar)
- ame_president_contact (varchar)

### TABLE : rapport_langues_projets
- id (PK)
- rapport_id (FK)
- langue_nationale (enum: wolof, pulaar, serer, mandinka, soninké, autre)
- projets_informatiques_existe (boolean)
- projets_informatiques_nom (text)

### TABLE : rapport_ressources_financieres
- id (PK)
- rapport_id (FK)

# Subvention État
- subvention_etat_existe (boolean)
- subvention_etat_montant (decimal)

# Subvention Partenaires
- subvention_partenaires_existe (boolean)
- subvention_partenaires_montant (decimal)

# Subvention Collectivités Locales
- subvention_collectivites_existe (boolean)
- subvention_collectivites_montant (decimal)

# Subvention Communauté
- subvention_communaute_existe (boolean)
- subvention_communaute_montant (decimal)

# Ressources Générées (AGR)
- ressources_generees_existe (boolean)
- ressources_generees_montant (decimal)

# Totaux calculés
- total_ressources (decimal, calculé)

================================================================================
SECTION 2 : EFFECTIFS DES ÉLÈVES (217 colonnes)
Onglet Excel: "2-Effectifs"
================================================================================

### TABLE : rapport_effectifs_classe
- id (PK)
- rapport_id (FK)
- niveau (enum: CI, CP, CE1, CE2, CM1, CM2)

# NOMBRE DE CLASSES
- nombre_classes (int)

# EFFECTIFS GLOBAUX
- effectif_garcons (int)
- effectif_filles (int)
- effectif_total (int, calculé)

# REDOUBLANTS
- redoublants_garcons (int)
- redoublants_filles (int)
- redoublants_total (int, calculé)

# ABANDONS
- abandons_garcons (int)
- abandons_filles (int)
- abandons_total (int, calculé)

# HANDICAPS - MOTEUR
- handicap_moteur_garcons (int)
- handicap_moteur_filles (int)
- handicap_moteur_total (int, calculé)

# HANDICAPS - VISUEL
- handicap_visuel_garcons (int)
- handicap_visuel_filles (int)
- handicap_visuel_total (int, calculé)

# HANDICAPS - SOURD/MUET
- handicap_sourd_muet_garcons (int)
- handicap_sourd_muet_filles (int)
- handicap_sourd_muet_total (int, calculé)

# HANDICAPS - DÉFICIENCE INTELLECTUELLE
- handicap_deficience_intel_garcons (int)
- handicap_deficience_intel_filles (int)
- handicap_deficience_intel_total (int, calculé)

# ORPHELINS
- orphelins_garcons (int)
- orphelins_filles (int)
- orphelins_total (int, calculé)

# SANS EXTRAIT DE NAISSANCE
- sans_extrait_garcons (int)
- sans_extrait_filles (int)
- sans_extrait_total (int, calculé)

# TOTAUX CALCULÉS AUTOMATIQUEMENT
- total_handicaps_garcons (calculé: somme de tous les handicaps garçons)
- total_handicaps_filles (calculé: somme de tous les handicaps filles)
- total_handicaps (calculé)

### NOTE : TOTAL ÉCOLE
Cette table aura 6 enregistrements par rapport (un par niveau CI→CM2)
+ 1 ligne TOTAL ÉCOLE calculée automatiquement

### VUES CALCULÉES / STATISTIQUES :
- Taux de redoublement par niveau et par genre
- Taux d'abandon par niveau et par genre
- Taux de scolarisation des enfants handicapés
- Taux d'enfants orphelins
- Taux d'enfants sans extrait de naissance
- Parité filles/garçons
- Évolution des effectifs

================================================================================
SECTION 3 : EXAMENS ET RECRUTEMENT (44 colonnes)
Onglet Excel: "3-CI&CMG&CFEE"
================================================================================

### TABLE : rapport_recrutement_ci
- id (PK)
- rapport_id (FK)

# Recrutement CI (Cours d'Initiation)
- ci_nombre (int)
- ci_combinaison_1 (varchar)
- ci_combinaison_2 (varchar)
- ci_combinaison_3 (varchar)
- ci_combinaison_autres (varchar)

# Effectifs CI par période
- ci_octobre_garcons (int)
- ci_octobre_filles (int)
- ci_octobre_total (int, calculé)
- ci_janvier_garcons (int)
- ci_janvier_filles (int)
- ci_janvier_total (int, calculé)
- ci_mai_garcons (int)
- ci_mai_filles (int)
- ci_mai_total (int, calculé)

- ci_statut (enum: homologué, non_homologué)

### TABLE : rapport_cmg
- id (PK)
- rapport_id (FK)

# CMG (Cours Moyen Groupe)
- cmg_nombre (int)
- cmg_combinaison_1 (varchar)
- cmg_combinaison_2 (varchar)
- cmg_combinaison_3 (varchar)
- cmg_combinaison_autres (varchar)

### TABLE : rapport_cfee
- id (PK)
- rapport_id (FK)

# CFEE (Certificat de Fin d'Études Élémentaires)
- cfee_candidats_total (int)
- cfee_candidats_filles (int)
- cfee_admis_total (int)
- cfee_admis_filles (int)

# Taux calculés
- cfee_taux_reussite (decimal, calculé)
- cfee_taux_reussite_filles (decimal, calculé)

### TABLE : rapport_entree_sixieme
- id (PK)
- rapport_id (FK)

# Entrée en 6ème
- sixieme_candidats_total (int)
- sixieme_candidats_filles (int)
- sixieme_admis_total (int)
- sixieme_admis_filles (int)

# Taux calculés
- sixieme_taux_admission (decimal, calculé)
- sixieme_taux_admission_filles (decimal, calculé)

### TABLE : rapport_langues_projets_pedagogiques
- id (PK)
- rapport_id (FK)
- langue_nationale_plus_parlee (enum: wolof, pulaar, serer, mandinka, soninké, autre)
- existence_projets_pedagogiques (boolean)
- nom_projets (text)

================================================================================
SECTION 4 : PERSONNEL ENSEIGNANT (64 colonnes)
Onglet Excel: "4-Personnel"
================================================================================

### TABLE : rapport_personnel_enseignant
- id (PK)
- rapport_id (FK)

# RÉPARTITION PAR SPÉCIALITÉ
- titulaires_hommes (int)
- titulaires_femmes (int)
- titulaires_total (int, calculé)

- vacataires_hommes (int)
- vacataires_femmes (int)
- vacataires_total (int, calculé)

- volontaires_hommes (int)
- volontaires_femmes (int)
- volontaires_total (int, calculé)

- contractuels_hommes (int)
- contractuels_femmes (int)
- contractuels_total (int, calculé)

- communautaires_hommes (int)
- communautaires_femmes (int)
- communautaires_total (int, calculé)

# RÉPARTITION PAR CORPS
- instituteurs_hommes (int)
- instituteurs_femmes (int)
- instituteurs_total (int, calculé)

- instituteurs_adjoints_hommes (int)
- instituteurs_adjoints_femmes (int)
- instituteurs_adjoints_total (int, calculé)

- professeurs_hommes (int)
- professeurs_femmes (int)
- professeurs_total (int, calculé)

# RÉPARTITION PAR DIPLÔMES
- bac_hommes (int)
- bac_femmes (int)
- bac_total (int, calculé)

- bfem_hommes (int)
- bfem_femmes (int)
- bfem_total (int, calculé)

- cfee_hommes (int)
- cfee_femmes (int)
- cfee_total (int, calculé)

- licence_hommes (int)
- licence_femmes (int)
- licence_total (int, calculé)

- master_hommes (int)
- master_femmes (int)
- master_total (int, calculé)

- autres_diplomes_hommes (int)
- autres_diplomes_femmes (int)
- autres_diplomes_total (int, calculé)

# COMPÉTENCES TIC
- enseignants_formes_tic_hommes (int)
- enseignants_formes_tic_femmes (int)
- enseignants_formes_tic_total (int, calculé)

# TOTAUX GÉNÉRAUX
- total_personnel_hommes (int, calculé)
- total_personnel_femmes (int, calculé)
- total_personnel (int, calculé)

# Ratios calculés
- ratio_eleves_enseignant (decimal, calculé)
- taux_feminisation (decimal, calculé)

================================================================================
SECTION 5 : MATÉRIEL ET MOBILIER (256 colonnes!)
Onglet Excel: "5-Mat&Mob"
================================================================================

### TABLE : rapport_capital_immobilier
- id (PK)
- rapport_id (FK)

# SALLES DE CLASSE
- salles_dur_total (int)
- salles_dur_bon_etat (int)
- abris_provisoires_total (int)
- abris_provisoires_bon_etat (int)

# BÂTIMENTS ADMINISTRATIFS
- bloc_admin_total (int)
- bloc_admin_bon_etat (int)
- magasin_total (int)
- magasin_bon_etat (int)

# SALLES SPÉCIALISÉES
- salle_informatique_total (int)
- salle_informatique_bon_etat (int)
- salle_bibliotheque_total (int)
- salle_bibliotheque_bon_etat (int)
- cuisine_total (int)
- cuisine_bon_etat (int)
- refectoire_total (int)
- refectoire_bon_etat (int)

# TOILETTES
- toilettes_enseignants_total (int)
- toilettes_enseignants_bon_etat (int)
- toilettes_garcons_total (int)
- toilettes_garcons_bon_etat (int)
- toilettes_filles_total (int)
- toilettes_filles_bon_etat (int)
- toilettes_mixtes_total (int)
- toilettes_mixtes_bon_etat (int)

# LOGEMENTS
- logement_directeur_total (int)
- logement_directeur_bon_etat (int)
- logement_gardien_total (int)
- logement_gardien_bon_etat (int)

# AUTRES INFRASTRUCTURES
- autres_infrastructures_total (int)
- autres_infrastructures_bon_etat (int)

### TABLE : rapport_materiel_didactique
- id (PK)
- rapport_id (FK)

# DICTIONNAIRES
- dico_francais_total (int)
- dico_francais_bon_etat (int)
- dico_arabe_total (int)
- dico_arabe_bon_etat (int)
- dico_autre_total (int)
- dico_autre_bon_etat (int)

# INSTRUMENTS DE GÉOMÉTRIE
- regle_plate_total (int)
- regle_plate_bon_etat (int)
- equerre_total (int)
- equerre_bon_etat (int)
- compas_total (int)
- compas_bon_etat (int)
- rapporteur_total (int)
- rapporteur_bon_etat (int)

# INSTRUMENTS DE MESURE
- decametre_total (int)
- decametre_bon_etat (int)
- chaine_arpenteur_total (int)
- chaine_arpenteur_bon_etat (int)
- boussole_total (int)
- boussole_bon_etat (int)
- thermometre_total (int)
- thermometre_bon_etat (int)
- kit_capacite_total (int)
- kit_capacite_bon_etat (int)
- balance_total (int)
- balance_bon_etat (int)

# MATÉRIEL PÉDAGOGIQUE
- globe_total (int)
- globe_bon_etat (int)
- cartes_murales_total (int)
- cartes_murales_bon_etat (int)
- planches_illustrees_total (int)
- planches_illustrees_bon_etat (int)
- kit_materiel_scientifique_total (int)
- kit_materiel_scientifique_bon_etat (int)
- autres_materiel_total (int)
- autres_materiel_bon_etat (int)

### TABLE : rapport_capital_mobilier
- id (PK)
- rapport_id (FK)

# MOBILIER ÉLÈVES
- tables_bancs_total (int)
- tables_bancs_bon_etat (int)

# MOBILIER ENSEIGNANTS
- bureaux_total (int)
- bureaux_bon_etat (int)
- chaises_total (int)
- chaises_bon_etat (int)
- armoires_total (int)
- armoires_bon_etat (int)

# TABLEAUX
- tableaux_mobiles_total (int)
- tableaux_mobiles_bon_etat (int)
- tableaux_interactifs_total (int)
- tableaux_interactifs_bon_etat (int)
- tableaux_muraux_total (int)
- tableaux_muraux_bon_etat (int)

# SYMBOLES NATIONAUX
- mat_drapeau_total (int)
- mat_drapeau_bon_etat (int)
- drapeau_total (int)
- drapeau_bon_etat (int)

### TABLE : rapport_equipement_informatique
- id (PK)
- rapport_id (FK)

# ORDINATEURS
- ordinateurs_fixes_total (int)
- ordinateurs_fixes_bon_etat (int)
- ordinateurs_portables_total (int)
- ordinateurs_portables_bon_etat (int)
- tablettes_total (int)
- tablettes_bon_etat (int)

# IMPRIMANTES
- imprimantes_laser_total (int)
- imprimantes_laser_bon_etat (int)
- imprimantes_jet_encre_total (int)
- imprimantes_jet_encre_bon_etat (int)
- imprimantes_multifonction_total (int)
- imprimantes_multifonction_bon_etat (int)
- photocopieuses_total (int)
- photocopieuses_bon_etat (int)

# ÉQUIPEMENT AUDIOVISUEL
- videoprojecteurs_total (int)
- videoprojecteurs_bon_etat (int)
- autres_equipements_total (int)
- autres_equipements_bon_etat (int)

### TABLE : rapport_manuels_eleves
- id (PK)
- rapport_id (FK)
- niveau (enum: CI, CP, CE1, CE2, CM1, CM2)

# MANUELS PAR MATIÈRE
- lc_francais (int)          # Lecture/Communication Français
- mathematiques (int)
- edd (int)                   # Éveil au Développement Durable
- dm (int)                    # Dessin/Musique
- manuel_classe (int)
- livret_maison (int)
- livret_devoir_gradue (int)
- planche_alphabetique (int)
- manuel_arabe (int)
- manuel_religion (int)
- autre_religion (int)
- autres_manuels (int)

### TABLE : rapport_manuels_maitre
- id (PK)
- rapport_id (FK)
- niveau (enum: CI, CP, CE1, CE2, CM1, CM2)

# GUIDES PÉDAGOGIQUES
- guide_lc_francais (int)
- guide_mathematiques (int)
- guide_edd (int)
- guide_dm (int)
- guide_pedagogique (int)
- guide_arabe_religieux (int)
- guide_langue_nationale (int)
- cahier_recits (int)
- autres_manuels_maitre (int)

### NOTE : MANUELS
Ces deux tables auront 6 enregistrements par rapport (un par niveau)
Cela permet de suivre la disponibilité des manuels niveau par niveau

================================================================================
SECTION 6 : WORKFLOW ET HISTORIQUE
================================================================================

### TABLE : rapport_historique
- id (PK)
- rapport_id (FK)
- user_id (FK → users)
- action (enum: création, modification, soumission, validation, rejet)
- commentaire (text)
- ancien_statut (enum)
- nouveau_statut (enum)
- created_at (timestamp)

### TABLE : rapport_commentaires
- id (PK)
- rapport_id (FK)
- user_id (FK → users)
- parent_id (FK → rapport_commentaires, nullable) -- Pour les réponses
- commentaire (text)
- section (enum: general, effectifs, personnel, materiel, etc.)
- statut (enum: ouvert, résolu)
- created_at
- updated_at

### TABLE : rapport_pieces_jointes
- id (PK)
- rapport_id (FK)
- user_id (FK → users)
- nom_fichier (varchar)
- chemin_fichier (varchar)
- type_fichier (varchar: image, pdf, excel, etc.)
- taille_fichier (int, en Ko)
- description (text)
- created_at

================================================================================
SECTION 7 : STATISTIQUES ET VUES CALCULÉES
================================================================================

### VUE : vue_synthese_etablissement
Agrège toutes les données d'un établissement sur une année:
- Effectifs totaux (garçons, filles, total)
- Nombre d'enseignants
- Ratio élèves/enseignant
- Taux de réussite CFEE
- Infrastructures disponibles
- Ressources financières totales

### VUE : vue_statistiques_zone
Agrège les données au niveau Zone/District/Arrondissement:
- Effectifs totaux par zone
- Nombre d'établissements
- Taux de scolarisation
- Parité filles/garçons
- Taux de réussite moyen

### VUE : vue_evolution_effectifs
Suivi des effectifs par établissement sur plusieurs années:
- Effectifs N-2, N-1, N
- Taux de croissance
- Projections N+1

### VUE : vue_besoins_prioritaires
Identifie les besoins prioritaires par établissement:
- Établissements sans toilettes séparées filles/garçons
- Établissements sans eau/électricité
- Ratios élèves/enseignant dépassant les normes
- Manque de manuels scolaires
- Infrastructures en mauvais état

================================================================================
PHASES D'IMPLÉMENTATION RECOMMANDÉES
================================================================================

### PHASE 1: TABLES ESSENTIELLES (Semaine 1-2)
1. rapports (table principale)
2. rapport_effectifs_classe
3. rapport_historique
4. rapport_commentaires
✓ Permet de commencer à saisir les effectifs

### PHASE 2: PERSONNEL ET EXAMENS (Semaine 3)
5. rapport_personnel_enseignant
6. rapport_cfee
7. rapport_entree_sixieme
8. rapport_recrutement_ci
✓ Données essentielles pour évaluation académique

### PHASE 3: INFRASTRUCTURES (Semaine 4)
9. rapport_infrastructures_base
10. rapport_capital_immobilier
11. rapport_structures_communautaires
✓ Suivi des conditions d'accueil

### PHASE 4: RESSOURCES (Semaine 5)
12. rapport_ressources_financieres
13. rapport_langues_projets
14. rapport_langues_projets_pedagogiques
✓ Gestion financière et projets

### PHASE 5: MATÉRIEL PÉDAGOGIQUE (Semaine 6-7)
15. rapport_materiel_didactique
16. rapport_capital_mobilier
17. rapport_equipement_informatique
18. rapport_manuels_eleves
19. rapport_manuels_maitre
✓ Inventaire complet du matériel

### PHASE 6: OPTIMISATION (Semaine 8)
20. rapport_pieces_jointes
21. Vues calculées
22. Procédures stockées
23. Triggers pour calculs automatiques
✓ Finitions et automatisation

================================================================================
NOTES TECHNIQUES
================================================================================

1. NORMALISATION:
   - Les 650 colonnes Excel ont été organisées en 20+ tables
   - Évite la redondance des données
   - Facilite les mises à jour et les requêtes

2. CALCULS AUTOMATIQUES:
   - Les colonnes "_total" seront calculées via triggers
   - Les taux (réussite, parité, etc.) seront des vues SQL
   - Évite les incohérences de saisie

3. FLEXIBILITÉ:
   - Structure permet d'ajouter de nouvelles années scolaires
   - Permet de comparer les données historiques
   - Supporte les rapports trimestriels et annuels

4. PERFORMANCE:
   - Index sur rapport_id, etablissement_id, annee_scolaire
   - Vues matérialisées pour les statistiques complexes
   - Partitionnement possible par année_scolaire

5. SÉCURITÉ:
   - Audit trail complet (rapport_historique)
   - Workflow de validation avant publication
   - Gestion des droits par rôle (admin, IEF, établissement)

================================================================================
FIN DE LA STRUCTURE
================================================================================
