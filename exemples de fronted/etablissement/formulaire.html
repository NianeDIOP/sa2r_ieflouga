{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulaire SA2R - {{ etablissement.nom }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'sa2r-blue': '#002147',
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50">
  <!-- Header avec navigation -->
  <header class="bg-[#002147] border-b border-blue-900/30 sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-4 py-3">
      <div class="flex items-center justify-between">
        <!-- Logo et nom -->
        <div class="flex items-center gap-3">
          <img src="/logo.svg" alt="SA2R" class="h-10">
          <div class="border-l border-white/30 pl-3">
            <p class="text-sm font-bold text-white">{{ etablissement.nom }}</p>
            <p class="text-xs text-blue-200">Code: {{ etablissement.code }}</p>
          </div>
        </div>

        <!-- Navigation centrale -->
        <div class="flex items-center gap-6">
          <a href="{% url 'etablissement_dashboard' %}" class="text-white/80 hover:text-white transition text-sm flex items-center gap-2">
            <i class="fas fa-home"></i>
            Dashboard
          </a>
          
          <a href="{% url 'etablissement_historique' %}" class="text-white/80 hover:text-white transition text-sm flex items-center gap-2">
            <i class="fas fa-history"></i>
            Historique
          </a>
          
          <div class="px-6 py-2 bg-green-600 text-white rounded-lg font-semibold text-sm flex items-center gap-2 shadow-lg">
            <i class="fas fa-file-alt"></i>
            Soumettre Rapport
          </div>
        </div>

        <!-- Actions √† droite -->
        <div class="flex items-center gap-3">
          <div class="flex items-center gap-2">
            <span class="text-xs text-blue-200">Progression:</span>
            <div class="w-20 h-1.5 bg-white/20 rounded-full">
              <div class="h-full bg-green-400 rounded-full transition-all" style="width: 0%"></div>
            </div>
            <span class="text-xs text-white font-semibold">0%</span>
          </div>
          
          <div id="autosave-indicator" class="flex items-center gap-1.5 text-xs text-green-300">
            <i class="fas fa-check-circle"></i>
            <span>Auto-save</span>
          </div>
          
          <button onclick="sauvegarder()" class="px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white text-xs rounded transition">
            <i class="fas fa-save mr-1"></i>Sauvegarder
          </button>
          
          <a href="{% url 'logout' %}" class="px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition">
            <i class="fas fa-sign-out-alt mr-1"></i>Quitter
          </a>
        </div>
      </div>
    </div>
  </header>

  <main class="py-4">
    <div class="max-w-7xl mx-auto px-4">
      <div class="grid grid-cols-5 gap-4">
        <!-- Sidebar -->
        <div class="col-span-1">
          <div class="bg-white rounded-lg shadow-sm border sticky top-20">
            <div class="p-4 border-b bg-gray-50">
              <h3 class="text-xs font-semibold text-gray-700 uppercase tracking-wide">Sections</h3>
            </div>
            <div class="p-4">
              <nav class="space-y-1.5">
                <button onclick="showSection(1)" id="btn-section-1" class="w-full flex items-center px-3 py-2 rounded text-xs transition bg-[#002147] text-white shadow-sm">
                  <i class="fas fa-address-card mr-2.5 text-sm text-white"></i>
                  <span class="flex-1 text-left font-medium">Contact</span>
                </button>
                <button onclick="showSection(2)" id="btn-section-2" class="w-full flex items-center px-3 py-2 rounded text-xs transition text-gray-700 hover:bg-gray-100">
                  <i class="fas fa-users-cog mr-2.5 text-sm text-blue-600"></i>
                  <span class="flex-1 text-left font-medium">Organisations</span>
                </button>
                <button onclick="showSection(3)" id="btn-section-3" class="w-full flex items-center px-3 py-2 rounded text-xs transition text-gray-700 hover:bg-gray-100">
                  <i class="fas fa-users mr-2.5 text-sm text-blue-600"></i>
                  <span class="flex-1 text-left font-medium">Effectifs</span>
                </button>
                <button onclick="showSection(4)" id="btn-section-4" class="w-full flex items-center px-3 py-2 rounded text-xs transition text-gray-700 hover:bg-gray-100">
                  <i class="fas fa-graduation-cap mr-2.5 text-sm text-blue-600"></i>
                  <span class="flex-1 text-left font-medium">Examens</span>
                </button>
                <button onclick="showSection(5)" id="btn-section-5" class="w-full flex items-center px-3 py-2 rounded text-xs transition text-gray-700 hover:bg-gray-100">
                  <i class="fas fa-chalkboard-teacher mr-2.5 text-sm text-blue-600"></i>
                  <span class="flex-1 text-left font-medium">Personnel</span>
                </button>
                <button onclick="showSection(6)" id="btn-section-6" class="w-full flex items-center px-3 py-2 rounded text-xs transition text-gray-700 hover:bg-gray-100">
                  <i class="fas fa-building mr-2.5 text-sm text-blue-600"></i>
                  <span class="flex-1 text-left font-medium">Infrastructure</span>
                </button>
                <button onclick="showSection(7)" id="btn-section-7" class="w-full flex items-center px-3 py-2 rounded text-xs transition text-gray-700 hover:bg-gray-100">
                  <i class="fas fa-coins mr-2.5 text-sm text-blue-600"></i>
                  <span class="flex-1 text-left font-medium">Finances</span>
                </button>
                <button onclick="showSection(8)" id="btn-section-8" class="w-full flex items-center px-3 py-2 rounded text-xs transition text-gray-700 hover:bg-gray-100">
                  <i class="fas fa-comment-alt mr-2.5 text-sm text-blue-600"></i>
                  <span class="flex-1 text-left font-medium">Observations</span>
                </button>
              </nav>
              <button onclick="soumettre()" class="w-full mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded transition">
                <i class="fas fa-paper-plane mr-2"></i>Soumettre
              </button>
            </div>
          </div>
        </div>

        <!-- Contenu -->
        <div class="col-span-4">
          <div class="bg-white rounded-lg shadow-sm border">
            <!-- En-t√™te section -->
            <div class="px-6 pt-4 pb-3 border-b bg-gray-50">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-100 text-[#002147] rounded-lg flex items-center justify-center flex-shrink-0">
                  <i id="section-icon" class="fas fa-address-card text-base"></i>
                </div>
                <div>
                  <h2 id="section-title" class="text-lg font-bold text-gray-900">Contact</h2>
                  <p id="section-subtitle" class="text-xs text-gray-500">Section 1 sur 8</p>
                </div>
              </div>
            </div>

            <!-- Contenu section -->
            <div class="p-6 min-h-[600px]">
              
              <!-- SECTION 1: CONTACT -->
              <div id="section-1" class="space-y-6">
                <!-- Informations G√©n√©rales (READONLY) -->
                <div>
                  <h3 class="text-sm font-semibold text-gray-900 mb-2 pb-2 border-b flex items-center">
                    <i class="fas fa-info-circle text-blue-600 mr-2 text-xs"></i>
                    Informations G√©n√©rales (pr√©-remplies)
                  </h3>
                  <div class="grid grid-cols-3 gap-3">
                    <div class="col-span-3">
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Nom de l'√©tablissement</label>
                      <input type="text" value="{{ etablissement.nom }}" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 cursor-not-allowed">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Code √©tablissement</label>
                      <input type="text" value="{{ etablissement.code }}" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 font-mono cursor-not-allowed">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Arrondissement</label>
                      <input type="text" value="{{ etablissement.arrondissement }}" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 cursor-not-allowed">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Commune</label>
                      <input type="text" value="{{ etablissement.commune }}" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 cursor-not-allowed">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Zone</label>
                      <input type="text" value="{{ etablissement.zone }}" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 cursor-not-allowed">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Statut</label>
                      <input type="text" value="{{ etablissement.statut }}" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 cursor-not-allowed">
                    </div>
                    <div class="col-span-2">
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Type Statut</label>
                      <input type="text" value="{{ etablissement.type_statut }}" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 cursor-not-allowed">
                    </div>
                  </div>
                </div>

                <!-- Informations Directeur (EDITABLE) -->
                <div>
                  <h3 class="text-sm font-semibold text-gray-900 mb-2 pb-2 border-b flex items-center">
                    <i class="fas fa-user-tie text-blue-600 mr-2 text-xs"></i>
                    Informations du Directeur
                  </h3>
                  <div class="grid grid-cols-2 gap-3">
                    <div class="col-span-2">
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">
                        Nom complet du Directeur <span class="text-red-500">*</span>
                      </label>
                      <input type="text" name="directeur_nom" placeholder="Pr√©nom et nom" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">
                        T√©l√©phone 1 <span class="text-red-500">*</span>
                      </label>
                      <input type="tel" name="directeur_contact_1" placeholder="77 123 45 67" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">T√©l√©phone 2</label>
                      <input type="tel" name="directeur_contact_2" placeholder="76 123 45 67" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Email</label>
                      <input type="email" name="directeur_email" placeholder="directeur@ecole.sn" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Distance (en km)</label>
                      <div class="flex items-center gap-2">
                        <input type="number" min="0" step="0.1" name="distance" placeholder="0.0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <span class="text-[10px] text-gray-500 whitespace-nowrap">km</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Infrastructure de Base -->
                <div>
                  <h3 class="text-sm font-semibold text-gray-900 mb-2 pb-2 border-b flex items-center">
                    <i class="fas fa-building text-blue-600 mr-2 text-xs"></i>
                    Infrastructure de Base
                  </h3>
                  
                  <div class="grid grid-cols-2 gap-3">
                    <!-- CPE -->
                    <div class="p-2.5 bg-gray-50 rounded">
                      <div class="flex items-center gap-3 mb-2">
                        <label class="flex items-center">
                          <input type="checkbox" id="cpe_existe" name="cpe_existe" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                          <span class="ml-2 text-[11px] font-medium text-gray-700">CPE (Conseiller P√©dagogique)</span>
                        </label>
                      </div>
                      <div id="cpe_details" class="ml-6 hidden">
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Nombre</label>
                        <input type="number" min="0" name="cpe_nombre" class="w-32 px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                    </div>

                    <!-- Cl√¥ture -->
                    <div class="p-2.5 bg-gray-50 rounded">
                      <div class="flex items-center gap-3 mb-2">
                        <label class="flex items-center">
                          <input type="checkbox" id="cloture" name="cloture" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                          <span class="ml-2 text-[11px] font-medium text-gray-700">Cl√¥ture</span>
                        </label>
                      </div>
                      <div id="cloture_details" class="ml-6 hidden">
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Type</label>
                        <select name="type_cloture" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                          <option value="">S√©lectionner...</option>
                          <option value="Mur">Mur</option>
                          <option value="Grillage">Grillage</option>
                          <option value="Haie vive">Haie vive</option>
                        </select>
                      </div>
                    </div>

                    <!-- Eau -->
                    <div class="p-2.5 bg-gray-50 rounded">
                      <div class="flex items-center gap-3 mb-2">
                        <label class="flex items-center">
                          <input type="checkbox" id="eau" name="eau" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                          <span class="ml-2 text-[11px] font-medium text-gray-700">Eau</span>
                        </label>
                      </div>
                      <div id="eau_details" class="ml-6 hidden">
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Type</label>
                        <select name="type_eau" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                          <option value="">S√©lectionner...</option>
                          <option value="Eau courante">Eau courante</option>
                          <option value="Puits">Puits</option>
                          <option value="Forage">Forage</option>
                          <option value="Autres">Autres</option>
                        </select>
                      </div>
                    </div>

                    <!-- √âlectricit√© -->
                    <div class="p-2.5 bg-gray-50 rounded">
                      <div class="flex items-center gap-3 mb-2">
                        <label class="flex items-center">
                          <input type="checkbox" id="electricite" name="electricite" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                          <span class="ml-2 text-[11px] font-medium text-gray-700">√âlectricit√©</span>
                        </label>
                      </div>
                      <div id="electricite_details" class="ml-6 hidden">
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Type</label>
                        <select name="type_electricite" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                          <option value="">S√©lectionner...</option>
                          <option value="R√©seau">R√©seau SENELEC</option>
                          <option value="Solaire">Solaire</option>
                          <option value="Groupe √©lectrog√®ne">Groupe √©lectrog√®ne</option>
                        </select>
                      </div>
                    </div>

                    <!-- Internet -->
                    <div class="p-2.5 bg-gray-50 rounded">
                      <div class="flex items-center gap-3 mb-2">
                        <label class="flex items-center">
                          <input type="checkbox" id="connexion_internet" name="connexion_internet" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                          <span class="ml-2 text-[11px] font-medium text-gray-700">Connexion Internet</span>
                        </label>
                      </div>
                      <div id="internet_details" class="ml-6 hidden">
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Type</label>
                        <select name="type_connexion_internet" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                          <option value="">S√©lectionner...</option>
                          <option value="Wifi">Wifi</option>
                          <option value="C√¢blage">C√¢blage</option>
                          <option value="Mobile">Mobile (3G/4G)</option>
                        </select>
                      </div>
                    </div>

                    <!-- Cantine -->
                    <div class="p-2.5 bg-gray-50 rounded">
                      <div class="flex items-center gap-3 mb-2">
                        <label class="flex items-center">
                          <input type="checkbox" id="cantine_scolaire" name="cantine_scolaire" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                          <span class="ml-2 text-[11px] font-medium text-gray-700">Cantine Scolaire</span>
                        </label>
                      </div>
                      <div id="cantine_details" class="ml-6 hidden">
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Type</label>
                        <input type="text" name="type_cantine_scolaire" placeholder="Pr√©ciser le type..." class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Langue et Projets -->
                <div>
                  <h3 class="text-sm font-semibold text-gray-900 mb-2 pb-2 border-b flex items-center">
                    <i class="fas fa-language text-blue-600 mr-2 text-xs"></i>
                    Langue Nationale et Projets
                  </h3>
                  <div class="grid grid-cols-2 gap-3">
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Langue nationale enseign√©e</label>
                      <select name="langue_nationale" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">S√©lectionner...</option>
                        <option value="WOLOF">Wolof</option>
                        <option value="PULAAR">Pulaar</option>
                        <option value="SERER">S√©r√®re</option>
                        <option value="Autres">Autres</option>
                      </select>
                    </div>
                    <div>
                      <label class="flex items-center h-full pt-6">
                        <input type="checkbox" id="existence_projets" name="existence_projets" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                        <span class="ml-2 text-[11px] font-medium text-gray-700">Existence de projets</span>
                      </label>
                    </div>
                    <div id="projets_details" class="col-span-2 hidden">
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Nom du/des projet(s)</label>
                      <textarea name="nom_autre_projet" rows="3" placeholder="Listez les projets en cours..." class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"></textarea>
                    </div>
                  </div>
                </div>

                <!-- Note d'aide -->
                <div class="mt-4 p-2.5 bg-blue-50 border border-blue-200 rounded">
                  <p class="text-[11px] text-blue-800">
                    <i class="fas fa-info-circle mr-1.5 text-xs"></i>
                    Les champs marqu√©s d'un <span class="text-red-500 font-semibold">*</span> sont obligatoires. 
                    Vos donn√©es sont sauvegard√©es automatiquement toutes les 30 secondes.
                  </p>
                </div>
              </div>

              <!-- SECTION 2: ORGANISATIONS -->
              <div id="section-2" class="hidden space-y-5">
                <!-- CGE - Comit√© de Gestion d'√âcole -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-blue-50 to-blue-100 px-4 py-3 border-b">
                    <div class="flex items-center">
                      <input type="checkbox" id="cge" name="cge" class="w-4 h-4 text-blue-600 rounded mr-3">
                      <div>
                        <h3 class="text-sm font-bold text-gray-900">CGE - Comit√© de Gestion d'√âcole</h3>
                        <p class="text-[10px] text-gray-600">Organe de gestion participative de l'√©cole</p>
                      </div>
                    </div>
                  </div>
                  
                  <div id="cge_content" class="p-4 space-y-4 hidden">
                    <!-- Effectifs -->
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Effectifs membres</h4>
                      <div class="grid grid-cols-3 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Hommes</label>
                          <input type="number" min="0" name="cge_h" id="cge_h" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Femmes</label>
                          <input type="number" min="0" name="cge_f" id="cge_f" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Total</label>
                          <input type="number" id="cge_total" value="0" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 font-semibold">
                        </div>
                      </div>
                    </div>

                    <!-- Pr√©sident -->
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Pr√©sident(e)</h4>
                      <div class="grid grid-cols-2 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Nom complet</label>
                          <input type="text" name="cge_president" placeholder="Pr√©nom et nom" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Contact</label>
                          <input type="tel" name="cge_contact_president" placeholder="77 123 45 67" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                      </div>
                    </div>

                    <!-- Tr√©sorier -->
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Tr√©sorier(√®re)</h4>
                      <div class="grid grid-cols-2 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Nom complet</label>
                          <input type="text" name="cge_tresorier" placeholder="Pr√©nom et nom" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Contact</label>
                          <input type="tel" name="cge_contact_tresorier" placeholder="77 123 45 67" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Gouvernement Scolaire -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-green-50 to-green-100 px-4 py-3 border-b">
                    <div class="flex items-center">
                      <input type="checkbox" id="g_scol" name="g_scol" class="w-4 h-4 text-green-600 rounded mr-3">
                      <div>
                        <h3 class="text-sm font-bold text-gray-900">Gouvernement Scolaire</h3>
                        <p class="text-[10px] text-gray-600">Organisation des √©l√®ves pour la vie scolaire</p>
                      </div>
                    </div>
                  </div>
                  
                  <div id="g_scol_content" class="p-4 space-y-4 hidden">
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Effectifs membres</h4>
                      <div class="grid grid-cols-3 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Gar√ßons</label>
                          <input type="number" min="0" name="g_scol_h" id="g_scol_h" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Filles</label>
                          <input type="number" min="0" name="g_scol_f" id="g_scol_f" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Total</label>
                          <input type="number" id="g_scol_total" value="0" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 font-semibold">
                        </div>
                      </div>
                    </div>

                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Pr√©sident(e)</h4>
                      <div class="grid grid-cols-2 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Nom complet</label>
                          <input type="text" name="g_scol_president" placeholder="Pr√©nom et nom de l'√©l√®ve" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Contact tuteur</label>
                          <input type="tel" name="g_scol_contact_president" placeholder="77 123 45 67" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- APE - Association des Parents d'√âl√®ves -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-purple-50 to-purple-100 px-4 py-3 border-b">
                    <div class="flex items-center">
                      <input type="checkbox" id="ape" name="ape" class="w-4 h-4 text-purple-600 rounded mr-3">
                      <div>
                        <h3 class="text-sm font-bold text-gray-900">APE - Association des Parents d'√âl√®ves</h3>
                        <p class="text-[10px] text-gray-600">Structure de participation des parents</p>
                      </div>
                    </div>
                  </div>
                  
                  <div id="ape_content" class="p-4 space-y-4 hidden">
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Effectifs membres</h4>
                      <div class="grid grid-cols-3 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Hommes</label>
                          <input type="number" min="0" name="ape_h" id="ape_h" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Femmes</label>
                          <input type="number" min="0" name="ape_f" id="ape_f" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Total</label>
                          <input type="number" id="ape_total" value="0" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-gray-50 text-gray-600 font-semibold">
                        </div>
                      </div>
                    </div>

                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Pr√©sident(e)</h4>
                      <div class="grid grid-cols-2 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Nom complet</label>
                          <input type="text" name="ape_president" placeholder="Pr√©nom et nom" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Contact</label>
                          <input type="tel" name="ape_contact_president" placeholder="77 123 45 67" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- AME - Association des M√®res d'√âl√®ves -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-pink-50 to-pink-100 px-4 py-3 border-b">
                    <div class="flex items-center">
                      <input type="checkbox" id="ame" name="ame" class="w-4 h-4 text-pink-600 rounded mr-3">
                      <div>
                        <h3 class="text-sm font-bold text-gray-900">AME - Association des M√®res d'√âl√®ves</h3>
                        <p class="text-[10px] text-gray-600">Structure sp√©cifique des m√®res d'√©l√®ves</p>
                      </div>
                    </div>
                  </div>
                  
                  <div id="ame_content" class="p-4 space-y-4 hidden">
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2">Pr√©sidente</h4>
                      <div class="grid grid-cols-2 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Nom complet</label>
                          <input type="text" name="ame_president" placeholder="Pr√©nom et nom" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-pink-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Contact</label>
                          <input type="tel" name="ame_contact_president" placeholder="77 123 45 67" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-pink-500">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Note d'aide -->
                <div class="mt-4 p-2.5 bg-blue-50 border border-blue-200 rounded">
                  <p class="text-[11px] text-blue-800">
                    <i class="fas fa-info-circle mr-1.5 text-xs"></i>
                    Cochez les organisations existantes dans votre √©tablissement. Les totaux sont calcul√©s automatiquement.
                  </p>
                </div>
              </div>

              <!-- SECTION 3: EFFECTIFS -->
              <div id="section-3" class="hidden space-y-4">
                <!-- Nombre de classes par niveau -->
                <div class="bg-gradient-to-r from-indigo-50 to-indigo-100 p-4 rounded-lg border border-indigo-200">
                  <h3 class="text-sm font-bold text-gray-900 mb-3">üìö Nombre de classes par niveau</h3>
                  <div class="grid grid-cols-7 gap-2">
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1 text-center">CI</label>
                      <input type="number" min="0" name="nbre_classes_ci" id="nbre_classes_ci" value="0" class="w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1 text-center">CP</label>
                      <input type="number" min="0" name="nbre_classes_cp" id="nbre_classes_cp" value="0" class="w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1 text-center">CE1</label>
                      <input type="number" min="0" name="nbre_classes_ce1" id="nbre_classes_ce1" value="0" class="w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1 text-center">CE2</label>
                      <input type="number" min="0" name="nbre_classes_ce2" id="nbre_classes_ce2" value="0" class="w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1 text-center">CM1</label>
                      <input type="number" min="0" name="nbre_classes_cm1" id="nbre_classes_cm1" value="0" class="w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1 text-center">CM2</label>
                      <input type="number" min="0" name="nbre_classes_cm2" id="nbre_classes_cm2" value="0" class="w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1 text-center">TOTAL</label>
                      <input type="number" id="nbre_classes_total" value="0" readonly class="w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded bg-gray-100 font-bold text-gray-700">
                    </div>
                  </div>
                </div>

                <!-- Tableau Effectifs Principaux -->
                <div class="overflow-x-auto border rounded-lg">
                  <table class="w-full text-[11px]">
                    <thead class="bg-gray-50 border-b">
                      <tr>
                        <th class="px-3 py-2 text-left font-semibold text-gray-700 sticky left-0 bg-gray-50 z-10">Niveau</th>
                        <th class="px-2 py-2 text-center font-semibold text-blue-700 border-l" colspan="3">Effectifs</th>
                        <th class="px-2 py-2 text-center font-semibold text-orange-700 border-l" colspan="3">Redoublants</th>
                        <th class="px-2 py-2 text-center font-semibold text-red-700 border-l" colspan="3">Abandons</th>
                      </tr>
                      <tr class="bg-gray-100">
                        <th class="px-3 py-1.5 text-left text-[10px] sticky left-0 bg-gray-100 z-10"></th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600">G</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600">F</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600 border-r">Tot</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600">G</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600">F</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600 border-r">Tot</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600">G</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600">F</th>
                        <th class="px-2 py-1.5 text-center text-[10px] text-gray-600">Tot</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="bg-white">
                        <td class="px-3 py-2 font-semibold text-gray-900 sticky left-0 z-10 bg-white">CI</td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ci_eff_g" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ci_eff_f" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="ci_eff_total" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-blue-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ci_redoub_g" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ci_redoub_f" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="ci_redoub_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-orange-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ci_aban_g" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ci_aban_f" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" id="ci_aban_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-red-50 font-semibold"></td>
                      </tr>
                      <tr class="bg-gray-50">
                        <td class="px-3 py-2 font-semibold text-gray-900 sticky left-0 z-10 bg-gray-50">CP</td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cp_eff_g" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cp_eff_f" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="cp_eff_total" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-blue-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cp_redoub_g" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cp_redoub_f" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="cp_redoub_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-orange-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cp_aban_g" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cp_aban_f" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" id="cp_aban_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-red-50 font-semibold"></td>
                      </tr>
                      <tr class="bg-white">
                        <td class="px-3 py-2 font-semibold text-gray-900 sticky left-0 z-10 bg-white">CE1</td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce1_eff_g" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce1_eff_f" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="ce1_eff_total" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-blue-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce1_redoub_g" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce1_redoub_f" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="ce1_redoub_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-orange-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce1_aban_g" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce1_aban_f" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" id="ce1_aban_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-red-50 font-semibold"></td>
                      </tr>
                      <tr class="bg-gray-50">
                        <td class="px-3 py-2 font-semibold text-gray-900 sticky left-0 z-10 bg-gray-50">CE2</td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce2_eff_g" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce2_eff_f" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="ce2_eff_total" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-blue-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce2_redoub_g" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce2_redoub_f" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="ce2_redoub_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-orange-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce2_aban_g" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="ce2_aban_f" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" id="ce2_aban_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-red-50 font-semibold"></td>
                      </tr>
                      <tr class="bg-white">
                        <td class="px-3 py-2 font-semibold text-gray-900 sticky left-0 z-10 bg-white">CM1</td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm1_eff_g" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm1_eff_f" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="cm1_eff_total" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-blue-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm1_redoub_g" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm1_redoub_f" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="cm1_redoub_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-orange-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm1_aban_g" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm1_aban_f" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" id="cm1_aban_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-red-50 font-semibold"></td>
                      </tr>
                      <tr class="bg-gray-50">
                        <td class="px-3 py-2 font-semibold text-gray-900 sticky left-0 z-10 bg-gray-50">CM2</td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm2_eff_g" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm2_eff_f" value="0" class="eff-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="cm2_eff_total" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-blue-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm2_redoub_g" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm2_redoub_f" value="0" class="redoub-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="cm2_redoub_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-orange-50 font-semibold"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm2_aban_g" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" min="0" id="cm2_aban_f" value="0" class="aban-input w-16 px-1 py-1 text-center text-xs border rounded"></td>
                        <td class="px-1 py-1"><input type="number" id="cm2_aban_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-red-50 font-semibold"></td>
                      </tr>
                      <tr class="bg-gray-200 font-bold border-t-2 border-gray-400">
                        <td class="px-3 py-2 text-gray-900 sticky left-0 bg-gray-200 z-10">TOTAL</td>
                        <td class="px-1 py-1"><input type="number" id="total_eff_g" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-gray-300 font-bold"></td>
                        <td class="px-1 py-1"><input type="number" id="total_eff_f" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-gray-300 font-bold"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="total_eff_total" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-blue-200 font-bold"></td>
                        <td class="px-1 py-1"><input type="number" id="total_redoub_g" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-gray-300 font-bold"></td>
                        <td class="px-1 py-1"><input type="number" id="total_redoub_f" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-gray-300 font-bold"></td>
                        <td class="px-1 py-1 border-r"><input type="number" id="total_redoub_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-orange-200 font-bold"></td>
                        <td class="px-1 py-1"><input type="number" id="total_aban_g" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-gray-300 font-bold"></td>
                        <td class="px-1 py-1"><input type="number" id="total_aban_f" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-gray-300 font-bold"></td>
                        <td class="px-1 py-1"><input type="number" id="total_aban_tot" value="0" readonly class="w-16 px-1 py-1 text-center text-xs border rounded bg-red-200 font-bold"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- Tableau Situations Particuli√®res -->
                <div class="overflow-x-auto border rounded-lg">
                  <h4 class="bg-purple-50 px-4 py-2 text-sm font-bold text-gray-900 border-b">√âl√®ves en situation particuli√®re</h4>
                  <div class="overflow-x-auto">
                    <table class="w-full text-[10px]">
                      <thead class="bg-gray-50 border-b">
                        <tr>
                          <th class="px-2 py-2 text-left font-semibold text-gray-700 sticky left-0 bg-gray-50 z-10">Niv</th>
                          <th class="px-1 py-1 text-center font-semibold text-purple-700 border-l" colspan="3">H.Mot</th>
                          <th class="px-1 py-1 text-center font-semibold text-purple-700 border-l" colspan="3">H.Vis</th>
                          <th class="px-1 py-1 text-center font-semibold text-purple-700 border-l" colspan="3">H.S/M</th>
                          <th class="px-1 py-1 text-center font-semibold text-purple-700 border-l" colspan="3">D.Int</th>
                          <th class="px-1 py-1 text-center font-semibold text-purple-700 border-l" colspan="3">H.Aut</th>
                          <th class="px-1 py-1 text-center font-semibold text-amber-700 border-l" colspan="3">Orph</th>
                          <th class="px-1 py-1 text-center font-semibold text-teal-700 border-l" colspan="3">S.Ext</th>
                        </tr>
                        <tr class="bg-gray-100">
                          <th class="px-2 py-1 sticky left-0 bg-gray-100 z-10"></th>
                          <th class="px-1 py-1 text-center text-[9px]">G</th><th class="px-1 py-1 text-center text-[9px]">F</th><th class="px-1 py-1 text-center text-[9px] border-r">T</th>
                          <th class="px-1 py-1 text-center text-[9px]">G</th><th class="px-1 py-1 text-center text-[9px]">F</th><th class="px-1 py-1 text-center text-[9px] border-r">T</th>
                          <th class="px-1 py-1 text-center text-[9px]">G</th><th class="px-1 py-1 text-center text-[9px]">F</th><th class="px-1 py-1 text-center text-[9px] border-r">T</th>
                          <th class="px-1 py-1 text-center text-[9px]">G</th><th class="px-1 py-1 text-center text-[9px]">F</th><th class="px-1 py-1 text-center text-[9px] border-r">T</th>
                          <th class="px-1 py-1 text-center text-[9px]">G</th><th class="px-1 py-1 text-center text-[9px]">F</th><th class="px-1 py-1 text-center text-[9px] border-r">T</th>
                          <th class="px-1 py-1 text-center text-[9px]">G</th><th class="px-1 py-1 text-center text-[9px]">F</th><th class="px-1 py-1 text-center text-[9px] border-r">T</th>
                          <th class="px-1 py-1 text-center text-[9px]">G</th><th class="px-1 py-1 text-center text-[9px]">F</th><th class="px-1 py-1 text-center text-[9px]">T</th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- CI -->
                        <tr class="bg-white">
                          <td class="px-2 py-1 font-semibold text-gray-900 sticky left-0 z-10 bg-white">CI</td>
                          <!-- Handicap Moteur -->
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_moteur_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_moteur_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ci_handi_moteur_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <!-- Handicap Visuel -->
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_visuel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_visuel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ci_handi_visuel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <!-- Handicap S/M -->
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_sm_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_sm_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ci_handi_sm_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <!-- D√©ficience Intellectuelle -->
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_intel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_intel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ci_handi_intel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <!-- Handicap Autre -->
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_autre_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_handi_autre_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ci_handi_autre_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <!-- Orphelins -->
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_orphelin_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_orphelin_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ci_orphelin_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-amber-50 font-semibold"></td>
                          <!-- Sans Extrait -->
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_sans_extrait_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ci_sans_extrait_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" id="ci_sans_extrait_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-teal-50 font-semibold"></td>
                        </tr>

                        <!-- CP -->
                        <tr class="bg-gray-50">
                          <td class="px-2 py-1 font-semibold text-gray-900 sticky left-0 z-10 bg-gray-50">CP</td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_moteur_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_moteur_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cp_handi_moteur_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_visuel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_visuel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cp_handi_visuel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_sm_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_sm_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cp_handi_sm_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_intel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_intel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cp_handi_intel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_autre_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_handi_autre_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cp_handi_autre_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_orphelin_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_orphelin_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cp_orphelin_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-amber-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_sans_extrait_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cp_sans_extrait_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" id="cp_sans_extrait_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-teal-50 font-semibold"></td>
                        </tr>

                        <!-- CE1 -->
                        <tr class="bg-white">
                          <td class="px-2 py-1 font-semibold text-gray-900 sticky left-0 z-10 bg-white">CE1</td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_moteur_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_moteur_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce1_handi_moteur_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_visuel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_visuel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce1_handi_visuel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_sm_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_sm_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce1_handi_sm_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_intel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_intel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce1_handi_intel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_autre_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_handi_autre_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce1_handi_autre_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_orphelin_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_orphelin_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce1_orphelin_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-amber-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_sans_extrait_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce1_sans_extrait_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" id="ce1_sans_extrait_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-teal-50 font-semibold"></td>
                        </tr>

                        <!-- CE2 -->
                        <tr class="bg-gray-50">
                          <td class="px-2 py-1 font-semibold text-gray-900 sticky left-0 z-10 bg-gray-50">CE2</td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_moteur_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_moteur_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce2_handi_moteur_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_visuel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_visuel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce2_handi_visuel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_sm_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_sm_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce2_handi_sm_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_intel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_intel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce2_handi_intel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_autre_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_handi_autre_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce2_handi_autre_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_orphelin_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_orphelin_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="ce2_orphelin_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-amber-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_sans_extrait_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="ce2_sans_extrait_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" id="ce2_sans_extrait_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-teal-50 font-semibold"></td>
                        </tr>

                        <!-- CM1 -->
                        <tr class="bg-white">
                          <td class="px-2 py-1 font-semibold text-gray-900 sticky left-0 z-10 bg-white">CM1</td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_moteur_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_moteur_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm1_handi_moteur_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_visuel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_visuel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm1_handi_visuel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_sm_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_sm_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm1_handi_sm_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_intel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_intel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm1_handi_intel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_autre_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_handi_autre_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm1_handi_autre_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_orphelin_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_orphelin_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm1_orphelin_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-amber-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_sans_extrait_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm1_sans_extrait_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" id="cm1_sans_extrait_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-teal-50 font-semibold"></td>
                        </tr>

                        <!-- CM2 -->
                        <tr class="bg-gray-50">
                          <td class="px-2 py-1 font-semibold text-gray-900 sticky left-0 z-10 bg-gray-50">CM2</td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_moteur_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_moteur_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm2_handi_moteur_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_visuel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_visuel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm2_handi_visuel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_sm_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_sm_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm2_handi_sm_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_intel_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_intel_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm2_handi_intel_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_autre_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_handi_autre_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm2_handi_autre_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-purple-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_orphelin_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_orphelin_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5 border-r"><input type="number" id="cm2_orphelin_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-amber-50 font-semibold"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_sans_extrait_g" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" min="0" id="cm2_sans_extrait_f" value="0" class="w-12 px-1 py-0.5 text-center text-[10px] border rounded"></td>
                          <td class="px-1 py-0.5"><input type="number" id="cm2_sans_extrait_tot" value="0" readonly class="w-12 px-1 py-0.5 text-center text-[10px] border rounded bg-teal-50 font-semibold"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <p class="px-4 py-2 text-[10px] text-gray-600 bg-gray-50 border-t">
                    <strong>Abr√©viations:</strong> H.Mot=Handicap Moteur, H.Vis=Handicap Visuel, H.S/M=Handicap Sourd/Muet, D.Int=D√©ficience Intellectuelle, H.Aut=Handicap Autre, Orph=Orphelins, S.Ext=Sans Extrait
                  </p>
                </div>

                <!-- Note -->
                <div class="p-2.5 bg-blue-50 border border-blue-200 rounded">
                  <p class="text-[11px] text-blue-800">
                    <i class="fas fa-info-circle mr-1.5 text-xs"></i>
                    Les totaux par ligne (G+F) et par colonne (tous niveaux) sont calcul√©s automatiquement.
                  </p>
                </div>
              </div>

              <!-- SECTION 4: EXAMENS -->
              <div id="section-4" class="hidden space-y-5">
                <!-- Recrutement au CI -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-cyan-50 to-cyan-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-child text-cyan-600 mr-2"></i>
                      √âvolution du Recrutement au CI
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Inscrits en d√©but d'ann√©e scolaire</p>
                  </div>
                  
                  <div class="p-4 space-y-4">
                    <!-- Mai -->
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2 flex items-center">
                        <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                        Recrutement de Mai
                      </h4>
                      <div class="grid grid-cols-3 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Gar√ßons</label>
                          <input type="number" min="0" id="recrutement_ci_mai_g" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Filles</label>
                          <input type="number" min="0" id="recrutement_ci_mai_f" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Total</label>
                          <input type="number" id="recrutement_ci_mai_total" value="0" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-green-50 font-semibold text-gray-700">
                        </div>
                      </div>
                    </div>

                    <!-- Octobre -->
                    <div>
                      <h4 class="text-xs font-semibold text-gray-700 mb-2 flex items-center">
                        <span class="w-2 h-2 bg-orange-500 rounded-full mr-2"></span>
                        Recrutement d'Octobre
                      </h4>
                      <div class="grid grid-cols-3 gap-3">
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Gar√ßons</label>
                          <input type="number" min="0" id="recrutement_ci_oct_g" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Filles</label>
                          <input type="number" min="0" id="recrutement_ci_oct_f" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                        </div>
                        <div>
                          <label class="block text-[11px] font-medium text-gray-700 mb-1">Total</label>
                          <input type="number" id="recrutement_ci_oct_total" value="0" readonly class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded bg-orange-50 font-semibold text-gray-700">
                        </div>
                      </div>
                    </div>

                    <!-- Statut CI -->
                    <div>
                      <label class="block text-[11px] font-medium text-gray-700 mb-1">Statut du Recrutement CI</label>
                      <select name="statut_ci" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                        <option value="">S√©lectionner...</option>
                        <option value="Normal">Normal</option>
                        <option value="En retard">En retard</option>
                        <option value="Non commenc√©">Non commenc√©</option>
                      </select>
                    </div>
                  </div>
                </div>

                <!-- CMG - Classes Multi-Grades -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-indigo-50 to-indigo-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-users text-indigo-600 mr-2"></i>
                      CMG - Classes Multi-Grades
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Classes regroupant plusieurs niveaux scolaires</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="grid grid-cols-2 gap-3">
                      <div class="col-span-2">
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Nombre de Classes Multi-Grades</label>
                        <input type="number" min="0" name="cmg_nombre" id="cmg_nombre" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                      </div>
                      <div>
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Combinaison 1</label>
                        <input type="text" name="cmg_combinaison_1" placeholder="Ex: CI-CP" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                      </div>
                      <div>
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Combinaison 2</label>
                        <input type="text" name="cmg_combinaison_2" placeholder="Ex: CE1-CE2" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                      </div>
                      <div>
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Combinaison 3</label>
                        <input type="text" name="cmg_combinaison_3" placeholder="Ex: CM1-CM2" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                      </div>
                      <div>
                        <label class="block text-[11px] font-medium text-gray-700 mb-1">Autres combinaisons</label>
                        <input type="text" name="cmg_combinaison_autres" placeholder="Autres combinaisons..." class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                      </div>
                    </div>
                    <div id="cmg_info" class="mt-3 p-2 bg-indigo-50 border border-indigo-200 rounded hidden">
                      <p class="text-[11px] text-indigo-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        <span id="cmg_nombre_text">0</span> classe(s) multi-grade(s) identifi√©e(s) dans l'√©tablissement
                      </p>
                    </div>
                  </div>
                </div>

                <!-- CFEE - Certificat de Fin d'√âtudes √âl√©mentaires -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-emerald-50 to-emerald-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-certificate text-emerald-600 mr-2"></i>
                      CFEE - Certificat de Fin d'√âtudes √âl√©mentaires
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">R√©sultats de l'examen de fin de cycle primaire</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="bg-emerald-50 p-3 rounded border border-emerald-200">
                      <h4 class="text-xs font-semibold text-gray-700 mb-3">R√©sultats CFEE</h4>
                      <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-2">
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">Nombre de candidats</label>
                            <input type="number" min="0" id="cfee_candidats_total" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                          </div>
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">dont Filles</label>
                            <input type="number" min="0" id="cfee_candidats_filles" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                          </div>
                        </div>
                        <div class="space-y-2">
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">Nombre d'admis</label>
                            <input type="number" min="0" id="cfee_admis_total" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                          </div>
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">dont Filles</label>
                            <input type="number" min="0" id="cfee_admis_filles" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                          </div>
                        </div>
                      </div>
                      <div id="cfee_taux" class="mt-3 pt-3 border-t border-emerald-300 hidden">
                        <p class="text-[11px] text-gray-700">
                          <span class="font-semibold">Taux de r√©ussite: </span>
                          <span class="text-emerald-700 font-bold" id="cfee_taux_general">0%</span>
                          <span class="ml-4" id="cfee_taux_filles_block">
                            <span class="font-semibold">Filles: </span>
                            <span class="text-pink-700 font-bold" id="cfee_taux_filles">0%</span>
                          </span>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- ENTR√âE EN 6√®me - Concours Moyen -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-violet-50 to-violet-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-graduation-cap text-violet-600 mr-2"></i>
                      Entr√©e en 6√®me - Concours Moyen
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">R√©sultats du concours d'entr√©e au coll√®ge</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="bg-violet-50 p-3 rounded border border-violet-200">
                      <h4 class="text-xs font-semibold text-gray-700 mb-3">R√©sultats Entr√©e 6√®me</h4>
                      <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-2">
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">Nombre de candidats</label>
                            <input type="number" min="0" id="entree6_candidats_total" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-violet-500">
                          </div>
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">dont Filles</label>
                            <input type="number" min="0" id="entree6_candidats_filles" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-violet-500">
                          </div>
                        </div>
                        <div class="space-y-2">
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">Nombre d'admis</label>
                            <input type="number" min="0" id="entree6_admis_total" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-violet-500">
                          </div>
                          <div>
                            <label class="block text-[11px] font-medium text-gray-700 mb-1">dont Filles</label>
                            <input type="number" min="0" id="entree6_admis_filles" value="0" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-violet-500">
                          </div>
                        </div>
                      </div>
                      <div id="entree6_taux" class="mt-3 pt-3 border-t border-violet-300 hidden">
                        <p class="text-[11px] text-gray-700">
                          <span class="font-semibold">Taux de r√©ussite: </span>
                          <span class="text-violet-700 font-bold" id="entree6_taux_general">0%</span>
                          <span class="ml-4" id="entree6_taux_filles_block">
                            <span class="font-semibold">Filles: </span>
                            <span class="text-pink-700 font-bold" id="entree6_taux_filles">0%</span>
                          </span>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Note d'aide -->
                <div class="p-2.5 bg-blue-50 border border-blue-200 rounded">
                  <p class="text-[11px] text-blue-800">
                    <i class="fas fa-info-circle mr-1.5 text-xs"></i>
                    Les taux de r√©ussite sont calcul√©s automatiquement. CMG = Classes Multi-Grades (regroupement de niveaux dans une m√™me classe).
                  </p>
                </div>
              </div>

              <!-- SECTION 5: PERSONNEL -->
              <div id="section-5" class="hidden space-y-5">
                <!-- Corps enseignants -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-blue-50 to-blue-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-chalkboard-teacher text-blue-600 mr-2"></i>
                      Corps Enseignants par Grade
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">R√©partition du personnel par corps et par genre</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">Corps</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold">Hommes</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold">Femmes</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold bg-blue-50">Total</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Enseignant form√©">FR - Form√©</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="fr_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="fr_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="fr_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Enseignant arabe">Arabe</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="arabe_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="arabe_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="arabe_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Grade I">I - Instituteur</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="i_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="i_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="i_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Grade ID">ID - Instituteur Dipl√¥m√©</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="id_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="id_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="id_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Grade IA">IA - Instituteur Adjoint</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="ia_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="ia_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="ia_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Grade IAD">IAD - Instituteur Adjoint Dipl√¥m√©</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="iad_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="iad_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="iad_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Grade MC">MC - Ma√Ætre Contractuel</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mc_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mc_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="mc_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Grade CAP">CAP - Certificat d'Aptitude P√©dagogique</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="cap_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="cap_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="cap_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10" title="Grade CEAP">CEAP - Certificat √âl√©mentaire d'Aptitude P√©dagogique</td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="ceap_h" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="ceap_f" value="0" class="personnel-input w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" id="ceap_total" value="0" readonly class="w-16 px-1 py-1 text-xs text-center border-0 bg-transparent font-semibold text-blue-700">
                            </td>
                          </tr>
                          <tr class="bg-blue-100 font-bold">
                            <td class="border border-gray-300 px-3 py-2 sticky left-0 bg-blue-100 z-10">TOTAL G√âN√âRAL</td>
                            <td class="border border-gray-300 px-2 py-1 text-center text-blue-900" id="personnel_total_h">0</td>
                            <td class="border border-gray-300 px-2 py-1 text-center text-blue-900" id="personnel_total_f">0</td>
                            <td class="border border-gray-300 px-2 py-1 text-center text-blue-900 bg-blue-200" id="personnel_total_general">0</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <!-- Comp√©tences TIC -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-purple-50 to-purple-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-laptop text-purple-600 mr-2"></i>
                      Comp√©tences TIC du Personnel
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Niveau de ma√Ætrise des outils informatiques par le personnel</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">Logiciel</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold text-red-700">Aucun</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold text-orange-700">Faible</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold text-yellow-700">Moyen</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold text-green-700">Avanc√©</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold bg-purple-50">Total</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <span class="mr-2">üìù</span>Microsoft Word
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-red-50">
                              <input type="number" min="0" id="word_aucun" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-red-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-orange-50">
                              <input type="number" min="0" id="word_faible" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="word_moyen" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="word_avance" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-purple-50">
                              <span class="font-semibold text-purple-700" id="word_total">0</span>
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <span class="mr-2">üìä</span>Microsoft Excel
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-red-50">
                              <input type="number" min="0" id="excel_aucun" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-red-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-orange-50">
                              <input type="number" min="0" id="excel_faible" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="excel_moyen" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="excel_avance" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-purple-50">
                              <span class="font-semibold text-purple-700" id="excel_total">0</span>
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <span class="mr-2">üìΩÔ∏è</span>PowerPoint
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-red-50">
                              <input type="number" min="0" id="powerpoint_aucun" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-red-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-orange-50">
                              <input type="number" min="0" id="powerpoint_faible" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="powerpoint_moyen" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="powerpoint_avance" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-purple-50">
                              <span class="font-semibold text-purple-700" id="powerpoint_total">0</span>
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <span class="mr-2">üíª</span>Autres logiciels
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-red-50">
                              <input type="number" min="0" id="autres_aucun" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-red-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-orange-50">
                              <input type="number" min="0" id="autres_faible" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-orange-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="autres_moyen" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-yellow-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="autres_avance" value="0" class="tic-input w-14 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-purple-50">
                              <span class="font-semibold text-purple-700" id="autres_total">0</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    
                    <div class="mt-3 p-2.5 bg-purple-50 border border-purple-200 rounded">
                      <p class="text-[11px] text-purple-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Indiquez le nombre de personnes par niveau de comp√©tence pour chaque logiciel. Le total doit correspondre au nombre total d'enseignants.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SECTION 6: INFRASTRUCTURE -->
              <div id="section-6" class="hidden space-y-5">
                <!-- Capital Immobilier -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-teal-50 to-teal-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-building text-teal-600 mr-2"></i>
                      Capital Immobilier
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">√âtat des infrastructures b√¢ties de l'√©tablissement</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">Infrastructure</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold">Total</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold bg-green-50">En Bon √âtat</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-school text-teal-600 mr-2"></i>Salles en dur
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_salles_dur_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_salles_dur_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-home text-teal-600 mr-2"></i>Abris provisoires
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_abris_provi_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_abris_provi_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-building text-teal-600 mr-2"></i>Blocs administratifs
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_bloc_admin_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_bloc_admin_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-door-open text-teal-600 mr-2"></i>Bureaux
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_bureaux_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_bureaux_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-warehouse text-teal-600 mr-2"></i>Magasins
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_magasins_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_magasins_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-desktop text-teal-600 mr-2"></i>Salles informatiques
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_salle_info_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_salle_info_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book-reader text-teal-600 mr-2"></i>Salles biblioth√®que
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_salle_biblio_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_salle_biblio_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-fire text-teal-600 mr-2"></i>Cuisines
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_cuisines_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_cuisines_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-chair text-teal-600 mr-2"></i>R√©fectoires
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_refectoires_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_refectoires_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-restroom text-teal-600 mr-2"></i>Toilettes enseignants
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_toilettes_ens_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_toilettes_ens_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-restroom text-teal-600 mr-2"></i>Toilettes √©l√®ves
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_toilettes_eleves_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_toilettes_eleves_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-hand-holding-medical text-teal-600 mr-2"></i>Infirmeries
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_infirmeries_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_infirmeries_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-tint text-teal-600 mr-2"></i>Points d'eau
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_points_eau_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_points_eau_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-tint text-teal-600 mr-2"></i>Puits
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_puits_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_puits_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-tint text-teal-600 mr-2"></i>Forages
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_forages_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_forages_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-home text-teal-600 mr-2"></i>Logements de ma√Ætres
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_logements_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_logements_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-football-ball text-teal-600 mr-2"></i>Terrains de sport
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_terrains_sport_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_terrains_sport_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-flag text-teal-600 mr-2"></i>M√¢ts
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_mats_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_mats_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-border-style text-teal-600 mr-2"></i>Cl√¥tures (en m√®tres)
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_clotures_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_clotures_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-tree text-teal-600 mr-2"></i>Arbres
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_arbres_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_arbres_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-seedling text-teal-600 mr-2"></i>Jardins scolaires
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_jardins_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_jardins_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-dumpster text-teal-600 mr-2"></i>Fosses √† ordures
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_fosses_ordures_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_fosses_ordures_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-solar-panel text-teal-600 mr-2"></i>Panneaux solaires
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="infra_panneaux_solaires_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-teal-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="infra_panneaux_solaires_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    
                    <div class="mt-3 p-2.5 bg-teal-50 border border-teal-200 rounded">
                      <p class="text-[11px] text-teal-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Indiquez le nombre total d'infrastructures et le nombre en bon √©tat. Pour les cl√¥tures, pr√©cisez la longueur en m√®tres.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Mat√©riels Didactiques -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-indigo-50 to-indigo-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-book text-indigo-600 mr-2"></i>
                      Mat√©riels Didactiques
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">√âquipements p√©dagogiques et mat√©riel d'enseignement</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">Mat√©riel</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold">Total</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold bg-green-50">En Bon √âtat</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-chalkboard text-indigo-600 mr-2"></i>Tableaux
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_tableaux_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_tableaux_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book-open text-indigo-600 mr-2"></i>Livres √©l√®ves
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_livres_eleves_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_livres_eleves_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book-reader text-indigo-600 mr-2"></i>Guides du ma√Ætre
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_guides_maitre_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_guides_maitre_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-pencil-alt text-indigo-600 mr-2"></i>Cahiers d'activit√©s
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_cahiers_activites_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_cahiers_activites_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-atlas text-indigo-600 mr-2"></i>Atlas
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_atlas_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_atlas_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-globe-africa text-indigo-600 mr-2"></i>Cartes murales
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_cartes_murales_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_cartes_murales_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-ruler text-indigo-600 mr-2"></i>√âquerres
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_equerres_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_equerres_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-compass text-indigo-600 mr-2"></i>Compas
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_compas_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_compas_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-shapes text-indigo-600 mr-2"></i>Mat√©riel g√©om√©trique
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_geometrique_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_geometrique_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-calculator text-indigo-600 mr-2"></i>Mat√©riel calcul
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_calcul_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_calcul_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-microscope text-indigo-600 mr-2"></i>Mat√©riel sciences
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_sciences_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_sciences_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-futbol text-indigo-600 mr-2"></i>Mat√©riel EPS
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_eps_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_eps_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-music text-indigo-600 mr-2"></i>Instruments de musique
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_instruments_musique_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_instruments_musique_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-palette text-indigo-600 mr-2"></i>Mat√©riel dessin
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_dessin_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_dessin_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-image text-indigo-600 mr-2"></i>Images mobiles
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_images_mobiles_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_images_mobiles_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-images text-indigo-600 mr-2"></i>Images fixes
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_images_fixes_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_images_fixes_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-flask text-indigo-600 mr-2"></i>Mat√©riel d'exp√©rimentation
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_experimentation_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_experimentation_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-hand-holding text-indigo-600 mr-2"></i>Mat√©riel de manipulation
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="materiel_manipulation_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-indigo-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="materiel_manipulation_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    
                    <div class="mt-3 p-2.5 bg-indigo-50 border border-indigo-200 rounded">
                      <p class="text-[11px] text-indigo-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Recensez tous les mat√©riels didactiques disponibles dans l'√©tablissement et leur √©tat de conservation.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Capital Mobilier -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-amber-50 to-amber-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-chair text-amber-600 mr-2"></i>
                      Capital Mobilier
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Mobilier et √©quipement de l'√©tablissement</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">Mobilier</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold">Total</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold bg-green-50">En Bon √âtat</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-chair text-amber-600 mr-2"></i>Tables-bancs √©l√®ves
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_tables_bancs_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_tables_bancs_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-desktop text-amber-600 mr-2"></i>Tables du ma√Ætre
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_tables_maitre_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_tables_maitre_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-chair text-amber-600 mr-2"></i>Chaises du ma√Ætre
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_chaises_maitre_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_chaises_maitre_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-archive text-amber-600 mr-2"></i>Armoires
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_armoires_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_armoires_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book text-amber-600 mr-2"></i>Biblioth√®ques
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_bibliotheques_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_bibliotheques_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-couch text-amber-600 mr-2"></i>Fauteuils
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_fauteuils_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_fauteuils_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-couch text-amber-600 mr-2"></i>Banquettes
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_banquettes_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_banquettes_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-battery-full text-amber-600 mr-2"></i>Batteries solaires
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_batteries_solaires_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_batteries_solaires_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-toolbox text-amber-600 mr-2"></i>Autres mobiliers
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="mobilier_autres_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-amber-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="mobilier_autres_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    
                    <div class="mt-3 p-2.5 bg-amber-50 border border-amber-200 rounded">
                      <p class="text-[11px] text-amber-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Inventaire du mobilier disponible dans l'√©tablissement et leur √©tat fonctionnel.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- √âquipements Informatiques -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-cyan-50 to-cyan-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-laptop text-cyan-600 mr-2"></i>
                      √âquipements Informatiques
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Mat√©riel informatique et num√©rique de l'√©tablissement</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">√âquipement</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold">Total</th>
                            <th class="border border-gray-300 px-3 py-2 text-center font-semibold bg-green-50">En Bon √âtat</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-desktop text-cyan-600 mr-2"></i>Ordinateurs de bureau
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_ordinateurs_bureau_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_ordinateurs_bureau_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-laptop text-cyan-600 mr-2"></i>Ordinateurs portables
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_ordinateurs_portables_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_ordinateurs_portables_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-tablet-alt text-cyan-600 mr-2"></i>Tablettes
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_tablettes_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_tablettes_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-print text-cyan-600 mr-2"></i>Imprimantes
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_imprimantes_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_imprimantes_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-network-wired text-cyan-600 mr-2"></i>Photocopieuses
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_photocopieuses_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_photocopieuses_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-tv text-cyan-600 mr-2"></i>Vid√©oprojecteurs
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_videoprojecteurs_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_videoprojecteurs_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-wifi text-cyan-600 mr-2"></i>Routeurs/Modems
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_routeurs_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_routeurs_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-sd-card text-cyan-600 mr-2"></i>Cl√©s USB
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_cles_usb_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_cles_usb_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-hdd text-cyan-600 mr-2"></i>Disques durs externes
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center">
                              <input type="number" min="0" id="equipement_disques_durs_total" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-cyan-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="equipement_disques_durs_bon" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-green-500">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    
                    <div class="mt-3 p-2.5 bg-cyan-50 border border-cyan-200 rounded">
                      <p class="text-[11px] text-cyan-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Recensement du mat√©riel informatique et num√©rique disponible et fonctionnel dans l'√©tablissement.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Manuels des √âl√®ves -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-rose-50 to-rose-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-book-open text-rose-600 mr-2"></i>
                      Manuels des √âl√®ves
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Manuels scolaires disponibles par niveau</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">Type de Manuel</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-blue-50">CI</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-blue-50">CP</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-green-50">CE1</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-green-50">CE2</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-yellow-50">CM1</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-yellow-50">CM2</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-language text-rose-600 mr-2"></i>L.C. (Fran√ßais)
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_lc_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_lc_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_lc_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_lc_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_lc_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_lc_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-calculator text-rose-600 mr-2"></i>Math√©matiques
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_maths_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_maths_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_maths_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_maths_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_maths_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_maths_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-globe text-rose-600 mr-2"></i>√â.D.D. (√âveil)
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_edd_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_edd_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_edd_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_edd_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_edd_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_edd_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book text-rose-600 mr-2"></i>D.M. (Documents Ma√Ætre)
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_dm_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_dm_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_dm_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_dm_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_dm_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_dm_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book-reader text-rose-600 mr-2"></i>Manuel de classe
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_classe_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_classe_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_classe_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_classe_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_classe_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_classe_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-home text-rose-600 mr-2"></i>Livret maison
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_livret_maison_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_livret_maison_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_livret_maison_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_livret_maison_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_livret_maison_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_livret_maison_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-graduation-cap text-rose-600 mr-2"></i>Livret d. gradu√©
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_livret_gradue_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_livret_gradue_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_livret_gradue_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_livret_gradue_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_livret_gradue_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_livret_gradue_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-spell-check text-rose-600 mr-2"></i>Planche alphab√©tique
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_planche_alpha_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_planche_alpha_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_planche_alpha_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_planche_alpha_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_planche_alpha_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_planche_alpha_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-pen-fancy text-rose-600 mr-2"></i>Manuel arabe
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_arabe_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_arabe_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_arabe_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_arabe_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_arabe_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_arabe_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-praying-hands text-rose-600 mr-2"></i>Manuel religion
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_religion_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_religion_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_religion_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_religion_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_religion_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_religion_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book text-rose-600 mr-2"></i>Autre religion
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_autre_religion_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_autre_religion_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_autre_religion_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_autre_religion_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_autre_religion_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_autre_religion_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book-open text-rose-600 mr-2"></i>Autres manuels
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_autres_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_eleve_autres_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_autres_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_eleve_autres_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_autres_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_eleve_autres_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-rose-500">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    
                    <div class="mt-3 p-2.5 bg-rose-50 border border-rose-200 rounded">
                      <p class="text-[11px] text-rose-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Indiquez le nombre de manuels disponibles pour chaque type et chaque niveau d'enseignement.
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Manuels du Ma√Ætre -->
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-purple-50 to-purple-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-chalkboard-teacher text-purple-600 mr-2"></i>
                      Manuels du Ma√Ætre
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Guides p√©dagogiques pour les enseignants par niveau</p>
                  </div>
                  
                  <div class="p-4">
                    <div class="overflow-x-auto">
                      <table class="w-full text-xs border-collapse">
                        <thead>
                          <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-3 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">Type de Manuel</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-blue-50">CI</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-blue-50">CP</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-green-50">CE1</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-green-50">CE2</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-yellow-50">CM1</th>
                            <th class="border border-gray-300 px-2 py-2 text-center font-semibold bg-yellow-50">CM2</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-language text-purple-600 mr-2"></i>Ma√Ætre L.C. (Fran√ßais)
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_lc_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_lc_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_lc_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_lc_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_lc_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_lc_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-calculator text-purple-600 mr-2"></i>Ma√Ætre Math√©matiques
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_maths_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_maths_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_maths_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_maths_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_maths_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_maths_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-globe text-purple-600 mr-2"></i>Ma√Ætre √â.D.D. (√âveil)
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_edd_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_edd_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_edd_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_edd_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_edd_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_edd_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book text-purple-600 mr-2"></i>Ma√Ætre D.M.
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_dm_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_dm_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_dm_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_dm_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_dm_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_dm_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book-reader text-purple-600 mr-2"></i>Ma√Ætre Manuel classe
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_classe_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_classe_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_classe_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_classe_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_classe_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_classe_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-pen-fancy text-purple-600 mr-2"></i>Ma√Ætre Manuel arabe
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_arabe_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_arabe_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_arabe_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_arabe_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_arabe_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_arabe_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-praying-hands text-purple-600 mr-2"></i>Ma√Ætre Manuel religion
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_religion_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_religion_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_religion_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_religion_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_religion_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_religion_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book text-purple-600 mr-2"></i>Ma√Ætre Autre religion
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_autre_religion_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_autre_religion_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_autre_religion_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_autre_religion_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_autre_religion_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_autre_religion_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                          <tr class="hover:bg-gray-50">
                            <td class="border border-gray-300 px-3 py-2 font-medium sticky left-0 bg-white z-10">
                              <i class="fas fa-book-open text-purple-600 mr-2"></i>Ma√Ætre Autres manuels
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_autres_ci" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-blue-50">
                              <input type="number" min="0" id="manuel_maitre_autres_cp" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_autres_ce1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-green-50">
                              <input type="number" min="0" id="manuel_maitre_autres_ce2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_autres_cm1" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                            <td class="border border-gray-300 px-2 py-1 text-center bg-yellow-50">
                              <input type="number" min="0" id="manuel_maitre_autres_cm2" value="0" class="w-16 px-1 py-1 text-xs text-center border border-gray-300 rounded focus:ring-2 focus:ring-purple-500">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    
                    <div class="mt-3 p-2.5 bg-purple-50 border border-purple-200 rounded">
                      <p class="text-[11px] text-purple-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Guides p√©dagogiques et documents destin√©s aux enseignants pour chaque niveau d'enseignement.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SECTION 7: FINANCES -->
              <div id="section-7" class="hidden space-y-5">
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-emerald-50 to-emerald-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-coins text-emerald-600 mr-2"></i>
                      Sources de Financement
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Financements re√ßus par l'√©tablissement durant l'ann√©e scolaire</p>
                  </div>
                  
                  <div class="p-5 space-y-4">
                    <!-- Source 1: √âtat -->
                    <div class="border border-gray-200 rounded-lg p-4 bg-white hover:shadow-md transition">
                      <div class="flex items-start gap-4">
                        <div class="flex items-center">
                          <input type="checkbox" id="finance_etat_recu" class="w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <div class="flex-1">
                          <label for="finance_etat_recu" class="flex items-center gap-2 font-semibold text-sm text-gray-900 cursor-pointer">
                            <i class="fas fa-landmark text-emerald-600"></i>
                            Financement de l'√âtat
                          </label>
                          <p class="text-[10px] text-gray-500 mt-1">Subventions et allocations gouvernementales</p>
                          
                          <div id="finance_etat_details" class="mt-3 hidden">
                            <div class="flex items-center gap-3">
                              <label class="text-xs text-gray-700 font-medium">Montant re√ßu:</label>
                              <input type="number" min="0" id="finance_etat_montant" value="0" class="finance-montant w-32 px-2 py-1.5 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500" placeholder="0">
                              <span class="text-xs text-gray-600 font-medium">FCFA</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Source 2: Partenaires -->
                    <div class="border border-gray-200 rounded-lg p-4 bg-white hover:shadow-md transition">
                      <div class="flex items-start gap-4">
                        <div class="flex items-center">
                          <input type="checkbox" id="finance_partenaires_recu" class="w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <div class="flex-1">
                          <label for="finance_partenaires_recu" class="flex items-center gap-2 font-semibold text-sm text-gray-900 cursor-pointer">
                            <i class="fas fa-handshake text-blue-600"></i>
                            Financement des Partenaires
                          </label>
                          <p class="text-[10px] text-gray-500 mt-1">ONG, associations et partenaires techniques et financiers</p>
                          
                          <div id="finance_partenaires_details" class="mt-3 hidden">
                            <div class="flex items-center gap-3">
                              <label class="text-xs text-gray-700 font-medium">Montant re√ßu:</label>
                              <input type="number" min="0" id="finance_partenaires_montant" value="0" class="finance-montant w-32 px-2 py-1.5 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500" placeholder="0">
                              <span class="text-xs text-gray-600 font-medium">FCFA</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Source 3: Collectivit√©s -->
                    <div class="border border-gray-200 rounded-lg p-4 bg-white hover:shadow-md transition">
                      <div class="flex items-start gap-4">
                        <div class="flex items-center">
                          <input type="checkbox" id="finance_collectivites_recu" class="w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <div class="flex-1">
                          <label for="finance_collectivites_recu" class="flex items-center gap-2 font-semibold text-sm text-gray-900 cursor-pointer">
                            <i class="fas fa-city text-purple-600"></i>
                            Financement des Collectivit√©s Locales
                          </label>
                          <p class="text-[10px] text-gray-500 mt-1">Communes, d√©partements et r√©gions</p>
                          
                          <div id="finance_collectivites_details" class="mt-3 hidden">
                            <div class="flex items-center gap-3">
                              <label class="text-xs text-gray-700 font-medium">Montant re√ßu:</label>
                              <input type="number" min="0" id="finance_collectivites_montant" value="0" class="finance-montant w-32 px-2 py-1.5 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500" placeholder="0">
                              <span class="text-xs text-gray-600 font-medium">FCFA</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Source 4: Communaut√© -->
                    <div class="border border-gray-200 rounded-lg p-4 bg-white hover:shadow-md transition">
                      <div class="flex items-start gap-4">
                        <div class="flex items-center">
                          <input type="checkbox" id="finance_communaute_recu" class="w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <div class="flex-1">
                          <label for="finance_communaute_recu" class="flex items-center gap-2 font-semibold text-sm text-gray-900 cursor-pointer">
                            <i class="fas fa-users text-orange-600"></i>
                            Financement de la Communaut√©
                          </label>
                          <p class="text-[10px] text-gray-500 mt-1">Contributions des parents d'√©l√®ves et de la communaut√© locale</p>
                          
                          <div id="finance_communaute_details" class="mt-3 hidden">
                            <div class="flex items-center gap-3">
                              <label class="text-xs text-gray-700 font-medium">Montant re√ßu:</label>
                              <input type="number" min="0" id="finance_communaute_montant" value="0" class="finance-montant w-32 px-2 py-1.5 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500" placeholder="0">
                              <span class="text-xs text-gray-600 font-medium">FCFA</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Source 5: Ressources g√©n√©r√©es -->
                    <div class="border border-gray-200 rounded-lg p-4 bg-white hover:shadow-md transition">
                      <div class="flex items-start gap-4">
                        <div class="flex items-center">
                          <input type="checkbox" id="finance_ressources_recu" class="w-4 h-4 text-emerald-600 border-gray-300 rounded focus:ring-2 focus:ring-emerald-500">
                        </div>
                        <div class="flex-1">
                          <label for="finance_ressources_recu" class="flex items-center gap-2 font-semibold text-sm text-gray-900 cursor-pointer">
                            <i class="fas fa-chart-line text-teal-600"></i>
                            Ressources Propres G√©n√©r√©es
                          </label>
                          <p class="text-[10px] text-gray-500 mt-1">Activit√©s g√©n√©ratrices de revenus, jardins scolaires, etc.</p>
                          
                          <div id="finance_ressources_details" class="mt-3 hidden">
                            <div class="flex items-center gap-3">
                              <label class="text-xs text-gray-700 font-medium">Montant g√©n√©r√©:</label>
                              <input type="number" min="0" id="finance_ressources_montant" value="0" class="finance-montant w-32 px-2 py-1.5 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-emerald-500" placeholder="0">
                              <span class="text-xs text-gray-600 font-medium">FCFA</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Total des financements -->
                    <div class="border-2 border-emerald-300 rounded-lg p-4 bg-gradient-to-r from-emerald-50 to-green-50">
                      <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                          <div class="w-10 h-10 rounded-full bg-emerald-600 flex items-center justify-center">
                            <i class="fas fa-calculator text-white"></i>
                          </div>
                          <div>
                            <p class="text-xs text-gray-600 font-medium">Total des Financements Re√ßus</p>
                            <p class="text-[10px] text-gray-500">Somme de toutes les sources</p>
                          </div>
                        </div>
                        <div class="text-right">
                          <p class="text-2xl font-bold text-emerald-700" id="finance_total">0</p>
                          <p class="text-xs text-emerald-600 font-medium">FCFA</p>
                        </div>
                      </div>
                    </div>

                    <div class="p-2.5 bg-emerald-50 border border-emerald-200 rounded">
                      <p class="text-[11px] text-emerald-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Cochez les sources de financement re√ßues et indiquez les montants exacts. Le total se calcule automatiquement.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- SECTION 8: OBSERVATIONS -->
              <div id="section-8" class="hidden space-y-5">
                <div class="border rounded-lg overflow-hidden">
                  <div class="bg-gradient-to-r from-purple-50 to-purple-100 px-4 py-3 border-b">
                    <h3 class="text-sm font-bold text-gray-900 flex items-center">
                      <i class="fas fa-comment-alt text-purple-600 mr-2"></i>
                      Observations et Commentaires
                    </h3>
                    <p class="text-[10px] text-gray-600 mt-0.5">Remarques, besoins sp√©cifiques et commentaires libres</p>
                  </div>
                  
                  <div class="p-5">
                    <div class="space-y-3">
                      <div class="flex items-center justify-between">
                        <label for="observations" class="text-xs font-semibold text-gray-700">
                          Observations g√©n√©rales
                        </label>
                        <span class="text-[10px] text-gray-500">
                          <span id="observation_count">0</span> / 2000 caract√®res
                        </span>
                      </div>
                      
                      <textarea 
                        id="observations" 
                        rows="8" 
                        maxlength="2000"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none"
                        placeholder="Ajoutez vos observations, remarques sur les conditions d'enseignement, besoins prioritaires, probl√®mes rencontr√©s, projets en cours ou envisag√©s, etc."
                      ></textarea>
                      
                      <div class="text-[10px] text-gray-500 leading-relaxed">
                        <i class="fas fa-lightbulb text-yellow-500 mr-1"></i>
                        <strong>Suggestions :</strong> Mentionnez les besoins urgents, les probl√®mes d'infrastructure, les d√©fis p√©dagogiques, les initiatives r√©ussies, etc.
                      </div>
                    </div>

                    <!-- Message de fin -->
                    <div class="mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg">
                      <div class="flex items-start gap-3">
                        <div class="w-10 h-10 rounded-full bg-green-600 flex items-center justify-center flex-shrink-0">
                          <i class="fas fa-check-circle text-white text-lg"></i>
                        </div>
                        <div>
                          <h4 class="text-sm font-bold text-green-900 mb-1">
                            Fin du Formulaire
                          </h4>
                          <p class="text-xs text-green-800 leading-relaxed mb-2">
                            Vous avez compl√©t√© toutes les sections du formulaire. V√©rifiez vos donn√©es avant de soumettre.
                          </p>
                          <div class="flex flex-wrap gap-2 text-[10px] text-green-700">
                            <span class="flex items-center gap-1">
                              <i class="fas fa-info-circle"></i>
                              8 sections remplies
                            </span>
                            <span class="flex items-center gap-1">
                              <i class="fas fa-save"></i>
                              Sauvegarde automatique active
                            </span>
                            <span class="flex items-center gap-1">
                              <i class="fas fa-clock"></i>
                              Vous pouvez revenir modifier
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="mt-4 p-2.5 bg-purple-50 border border-purple-200 rounded">
                      <p class="text-[11px] text-purple-800">
                        <i class="fas fa-info-circle mr-1.5"></i>
                        Utilisez ce champ pour toute information compl√©mentaire importante concernant votre √©tablissement.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <!-- Footer avec boutons navigation -->
            <div class="px-6 py-3 border-t bg-gray-50 flex items-center justify-between">
              <button onclick="prevSection()" id="btn-prev" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                <i class="fas fa-chevron-left mr-2"></i>Pr√©c√©dent
              </button>
              <button onclick="nextSection()" id="btn-next" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded transition">
                Suivant<i class="fas fa-chevron-right ml-2"></i>
              </button>
              <button onclick="soumettre()" id="btn-submit" class="px-5 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-semibold rounded transition shadow-md hidden">
                <i class="fas fa-paper-plane mr-2"></i>Soumettre le Formulaire
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    let currentSection = 1;
    let currentSubSection6 = 1; // Sous-section courante pour la section 6
    const totalSections = 8;
    const totalSubSections6 = 5; // Section 6 a 5 sous-sections
    
    const sections = [
      { id: 1, titre: 'Contact', icon: 'fa-address-card' },
      { id: 2, titre: 'Organisations', icon: 'fa-users-cog' },
      { id: 3, titre: 'Effectifs', icon: 'fa-users' },
      { id: 4, titre: 'Examens', icon: 'fa-graduation-cap' },
      { id: 5, titre: 'Personnel', icon: 'fa-chalkboard-teacher' },
      { id: 6, titre: 'Infrastructure', icon: 'fa-building' },
      { id: 7, titre: 'Finances', icon: 'fa-coins' },
      { id: 8, titre: 'Observations', icon: 'fa-comment-alt' }
    ];
    
    // Sous-sections de la section 6
    const subSections6 = [
      { id: 1, titre: 'Capital Immobilier' },
      { id: 2, titre: 'Mat√©riels Didactiques' },
      { id: 3, titre: 'Capital Mobilier' },
      { id: 4, titre: '√âquipements Informatiques' },
      { id: 5, titre: 'Manuels des √âl√®ves' }
    ];

    function showSection(num) {
      // Cacher toutes les sections
      for (let i = 1; i <= totalSections; i++) {
        document.getElementById(`section-${i}`).classList.add('hidden');
        const btn = document.getElementById(`btn-section-${i}`);
        btn.classList.remove('bg-[#002147]', 'text-white', 'shadow-sm');
        btn.classList.add('text-gray-700', 'hover:bg-gray-100');
        btn.querySelector('i').classList.remove('text-white');
        btn.querySelector('i').classList.add('text-blue-600');
      }

      // Afficher la section demand√©e
      document.getElementById(`section-${num}`).classList.remove('hidden');
      const activeBtn = document.getElementById(`btn-section-${num}`);
      activeBtn.classList.add('bg-[#002147]', 'text-white', 'shadow-sm');
      activeBtn.classList.remove('text-gray-700', 'hover:bg-gray-100');
      activeBtn.querySelector('i').classList.add('text-white');
      activeBtn.querySelector('i').classList.remove('text-blue-600');

      // Mettre √† jour l'en-t√™te
      const section = sections[num - 1];
      document.getElementById('section-icon').className = `fas ${section.icon} text-base`;
      document.getElementById('section-title').textContent = section.titre;
      document.getElementById('section-subtitle').textContent = `Section ${num} sur ${totalSections}`;

      // Si c'est la section 6, afficher la premi√®re sous-section
      if (num === 6) {
        currentSubSection6 = 1;
        showSubSection6(1);
      }
      
      // Si c'est la section 7 (Finances), recalculer le total
      if (num === 7) {
        setTimeout(() => {
          if (typeof calculateFinanceTotal === 'function') {
            calculateFinanceTotal();
          }
        }, 100);
      }

      // Mettre √† jour les boutons de navigation
      document.getElementById('btn-prev').disabled = (num === 1);
      
      // Si on est √† la derni√®re section, cacher "Suivant" et afficher "Soumettre"
      if (num === totalSections) {
        document.getElementById('btn-next').classList.add('hidden');
        document.getElementById('btn-submit').classList.remove('hidden');
      } else {
        document.getElementById('btn-next').classList.remove('hidden');
        document.getElementById('btn-submit').classList.add('hidden');
      }

      currentSection = num;
    }

    // Afficher une sous-section sp√©cifique de la section 6
    function showSubSection6(subNum) {
      const section6 = document.getElementById('section-6');
      if (!section6) return;
      
      // R√©cup√©rer tous les tableaux (divs avec class "border rounded-lg")
      const tables = section6.querySelectorAll(':scope > div.border.rounded-lg');
      
      // Cacher tous les tableaux
      tables.forEach((table, index) => {
        table.classList.add('hidden');
      });
      
      // Afficher le tableau demand√© (index = subNum - 1)
      if (tables[subNum - 1]) {
        tables[subNum - 1].classList.remove('hidden');
      }
      
      // Mettre √† jour le sous-titre pour indiquer la sous-section
      const subsection = subSections6[subNum - 1];
      document.getElementById('section-subtitle').textContent = 
        `Section 6 sur ${totalSections} - ${subsection.titre} (${subNum}/${totalSubSections6})`;
      
      currentSubSection6 = subNum;
    }

    function nextSection() {
      // Si on est dans la section 6 et qu'il reste des sous-sections
      if (currentSection === 6 && currentSubSection6 < totalSubSections6) {
        sauvegarderSilencieux(() => {
          showSubSection6(currentSubSection6 + 1);
        });
      } 
      // Sinon, passer √† la section suivante
      else if (currentSection < totalSections) {
        // Sauvegarder automatiquement avant de changer de section
        sauvegarderSilencieux(() => {
          showSection(currentSection + 1);
        });
      }
    }

    function prevSection() {
      // Si on est dans la section 6 et qu'on n'est pas √† la premi√®re sous-section
      if (currentSection === 6 && currentSubSection6 > 1) {
        sauvegarderSilencieux(() => {
          showSubSection6(currentSubSection6 - 1);
        });
      }
      // Sinon, revenir √† la section pr√©c√©dente
      else if (currentSection > 1) {
        // Sauvegarder automatiquement avant de changer de section
        sauvegarderSilencieux(() => {
          showSection(currentSection - 1);
        });
      }
    }

    // ============================================================
    // GESTION DES DONN√âES - AJAX
    // ============================================================
    
    // Obtenir le CSRF token
    function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }
    const csrftoken = getCookie('csrftoken');

    // Mettre √† jour la barre de progression dans le header
    // ==================== REVERSE MAPPING ====================
    // Convertir les noms MODEL Django ‚Üí noms HTML formulaire
    function reverseMappingSection3(data) {
      const reversed = {};
      const niveaux = ['ci', 'cp', 'ce1', 'ce2', 'cm1', 'cm2'];
      
      Object.keys(data).forEach(key => {
        let htmlKey = key;
        
        // Pattern: XX_nombre_classes ‚Üí nbre_classes_XX
        if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_nombre_classes$/)) {
          const niveau = key.split('_')[0];
          htmlKey = `nbre_classes_${niveau}`;
        }
        // Pattern: XX_effectif_garcons ‚Üí XX_eff_g
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_effectif_garcons$/)) {
          htmlKey = key.replace('_effectif_garcons', '_eff_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_effectif_filles$/)) {
          htmlKey = key.replace('_effectif_filles', '_eff_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_effectif_total$/)) {
          htmlKey = key.replace('_effectif_total', '_eff_total');
        }
        // Pattern: XX_redoublants_* ‚Üí XX_redoub_*
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_redoublants_garcons$/)) {
          htmlKey = key.replace('_redoublants_garcons', '_redoub_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_redoublants_filles$/)) {
          htmlKey = key.replace('_redoublants_filles', '_redoub_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_redoublants_total$/)) {
          htmlKey = key.replace('_redoublants_total', '_redoub_tot');
        }
        // Pattern: XX_abandons_* ‚Üí XX_aban_*
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_abandons_garcons$/)) {
          htmlKey = key.replace('_abandons_garcons', '_aban_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_abandons_filles$/)) {
          htmlKey = key.replace('_abandons_filles', '_aban_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_abandons_total$/)) {
          htmlKey = key.replace('_abandons_total', '_aban_tot');
        }
        // Pattern: XX_handicap_moteur_* ‚Üí XX_handi_moteur_*
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_moteur_garcons$/)) {
          htmlKey = key.replace('_handicap_moteur_garcons', '_handi_moteur_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_moteur_filles$/)) {
          htmlKey = key.replace('_handicap_moteur_filles', '_handi_moteur_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_moteur_total$/)) {
          htmlKey = key.replace('_handicap_moteur_total', '_handi_moteur_tot');
        }
        // Pattern: XX_handicap_visuel_* ‚Üí XX_handi_visuel_*
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_visuel_garcons$/)) {
          htmlKey = key.replace('_handicap_visuel_garcons', '_handi_visuel_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_visuel_filles$/)) {
          htmlKey = key.replace('_handicap_visuel_filles', '_handi_visuel_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_visuel_total$/)) {
          htmlKey = key.replace('_handicap_visuel_total', '_handi_visuel_tot');
        }
        // Pattern: XX_handicap_sourd_muet_* ‚Üí XX_handi_sm_*
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_sourd_muet_garcons$/)) {
          htmlKey = key.replace('_handicap_sourd_muet_garcons', '_handi_sm_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_sourd_muet_filles$/)) {
          htmlKey = key.replace('_handicap_sourd_muet_filles', '_handi_sm_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_handicap_sourd_muet_total$/)) {
          htmlKey = key.replace('_handicap_sourd_muet_total', '_handi_sm_tot');
        }
        // Pattern: XX_deficience_intellectuelle_* ‚Üí XX_handi_intel_*
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_deficience_intellectuelle_garcons$/)) {
          htmlKey = key.replace('_deficience_intellectuelle_garcons', '_handi_intel_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_deficience_intellectuelle_filles$/)) {
          htmlKey = key.replace('_deficience_intellectuelle_filles', '_handi_intel_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_deficience_intellectuelle_total$/)) {
          htmlKey = key.replace('_deficience_intellectuelle_total', '_handi_intel_tot');
        }
        // Pattern: XX_handicap_autre_* ‚Üí IGNOR√â (n'existe pas dans le mod√®le)
        // Ces champs existent dans le HTML mais pas dans la base de donn√©es
        
        // Pattern: XX_orphelins_* ‚Üí XX_orphelin_*
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_orphelins_garcons$/)) {
          htmlKey = key.replace('_orphelins_garcons', '_orphelin_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_orphelins_filles$/)) {
          htmlKey = key.replace('_orphelins_filles', '_orphelin_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_orphelins_total$/)) {
          htmlKey = key.replace('_orphelins_total', '_orphelin_tot');
        }
        // Pattern: XX_sans_extrait_* (identique)
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_sans_extrait_garcons$/)) {
          htmlKey = key.replace('_garcons', '_g');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_sans_extrait_filles$/)) {
          htmlKey = key.replace('_filles', '_f');
        }
        else if (key.match(/^(ci|cp|ce1|ce2|cm1|cm2)_sans_extrait_total$/)) {
          htmlKey = key.replace('_total', '_tot');
        }
        
        reversed[htmlKey] = data[key];
      });
      
      return reversed;
    }
    
    function reverseMappingSection1(data) {
      const mapping = {
        'cpe': 'cpe_existe',
        'cpe_type': 'cpe_nombre',
        'cloture_type': 'type_cloture',
        'eau_type': 'type_eau',
        'electricite_type': 'type_electricite',
        'internet': 'connexion_internet',
        'internet_type': 'type_connexion_internet',
        'cantine': 'cantine_scolaire',
        'cantine_type': 'type_cantine_scolaire'
      };
      
      const reversed = {};
      Object.keys(data).forEach(key => {
        const htmlKey = mapping[key] || key;
        reversed[htmlKey] = data[key];
      });
      return reversed;
    }
    
    function reverseMappingSection2(data) {
      const mapping = {
        'cge_existe': 'cge',
        'cge_hommes': 'cge_h',
        'cge_femmes': 'cge_f',
        'gscol_existe': 'g_scol',
        'gscol_garcons': 'g_scol_h',
        'gscol_filles': 'g_scol_f',
        'gscol_total': 'g_scol_total',
        'gscol_president': 'g_scol_president',
        'gscol_contact_president': 'g_scol_contact_president',
        'clpe_existe': 'ape',
        'clpe_president': 'ape_president',
        'clpe_contact_president': 'ape_contact_president',
        'aemo_existe': 'ame',
        'aemo_president': 'ame_president',
        'aemo_contact_president': 'ame_contact_president'
      };
      
      const reversed = {};
      Object.keys(data).forEach(key => {
        const htmlKey = mapping[key] || key;
        reversed[htmlKey] = data[key];
      });
      return reversed;
    }

    // Reverse mapping pour Section 4: R√©sultats Examens
    // Backend: garcons + filles ‚Üí Frontend: total + filles
    function reverseMappingSection4(data) {
      const reversed = {};
      
      // 1. Recrutement CI - garcons/filles ‚Üí g/f (pas de total, il sera recalcul√©)
      ['mai', 'oct'].forEach(periode => {
        const garcons_model = `recrutement_ci_${periode}_garcons`;
        const filles_model = `recrutement_ci_${periode}_filles`;
        const garcons_html = `recrutement_ci_${periode}_g`;
        const filles_html = `recrutement_ci_${periode}_f`;
        
        if (data.hasOwnProperty(garcons_model)) {
          reversed[garcons_html] = data[garcons_model];
        }
        if (data.hasOwnProperty(filles_model)) {
          reversed[filles_html] = data[filles_model];
        }
      });
      
      // 2. Statut CI - Passage direct
      if (data.statut_ci) {
        reversed['statut_ci'] = data.statut_ci;
      }
      
      // 3. CMG - Passage direct
      ['cmg_nombre', 'cmg_combinaison_1', 'cmg_combinaison_2', 'cmg_combinaison_3', 'cmg_combinaison_autres'].forEach(field => {
        if (data.hasOwnProperty(field)) {
          reversed[field] = data[field];
        }
      });
      
      // 4. Examens (CFEE, Entr√©e 6√®me) - garcons + filles ‚Üí total + filles
      const prefixes = ['cfee', 'entree_6eme'];
      const suffixes = ['candidats', 'admis'];
      
      prefixes.forEach(prefix => {
        suffixes.forEach(suffix => {
          // Nom dans le mod√®le backend
          const garcons_model = `${prefix}_${suffix}_garcons`;
          const filles_model = `${prefix}_${suffix}_filles`;
          
          // Nom dans le HTML (entree_6eme ‚Üí entree6)
          const html_prefix = prefix === 'entree_6eme' ? 'entree6' : prefix;
          const total_html = `${html_prefix}_${suffix}_total`;
          const filles_html = `${html_prefix}_${suffix}_filles`;
          
          // Si on a les donn√©es backend, calculer le total
          if (data.hasOwnProperty(garcons_model) || data.hasOwnProperty(filles_model)) {
            const garcons = parseInt(data[garcons_model]) || 0;
            const filles = parseInt(data[filles_model]) || 0;
            
            reversed[total_html] = garcons + filles;
            reversed[filles_html] = filles;
          }
        });
      });
      
      return reversed;
    }

    // Reverse mapping pour Section 5: Effectifs Personnel
    // Backend: ei_hommes/ei_femmes ‚Üí Frontend: fr_h/fr_f
    function reverseMappingSection5(data) {
      const reversed = {};
      
      // Mapping des corps enseignants (inverse du mapping backend)
      const mapping = {
        // Backend ‚Üí Frontend
        'ei_hommes': 'fr_h',
        'ei_femmes': 'fr_f',
        'ei_total': 'fr_total',
        'v_hommes': 'arabe_h',
        'v_femmes': 'arabe_f',
        'v_total': 'arabe_total',
        'c_hommes': 'i_h',
        'c_femmes': 'i_f',
        'c_total': 'i_total',
        'vac_hommes': 'id_h',
        'vac_femmes': 'id_f',
        'vac_total': 'id_total',
        'com_hommes': 'ia_h',
        'com_femmes': 'ia_f',
        'com_total': 'ia_total',
        'em_hommes': 'iad_h',
        'em_femmes': 'iad_f',
        'em_total': 'iad_total',
        'autre_hommes': 'mc_h',
        'autre_femmes': 'mc_f',
        'autre_total': 'mc_total',
        
        // Totaux g√©n√©raux
        'total_enseignants_hommes': 'personnel_total_h',
        'total_enseignants_femmes': 'personnel_total_f',
        'total_enseignants_general': 'personnel_total_general',
        
        // TIC - Comp√©tences d√©taill√©es par niveau
        // Word
        'word_aucun': 'word_aucun',
        'word_faible': 'word_faible',
        'word_moyen': 'word_moyen',
        'word_avance': 'word_avance',
        'tic_word': 'word_total',
        
        // Excel
        'excel_aucun': 'excel_aucun',
        'excel_faible': 'excel_faible',
        'excel_moyen': 'excel_moyen',
        'excel_avance': 'excel_avance',
        'tic_excel': 'excel_total',
        
        // PowerPoint
        'powerpoint_aucun': 'powerpoint_aucun',
        'powerpoint_faible': 'powerpoint_faible',
        'powerpoint_moyen': 'powerpoint_moyen',
        'powerpoint_avance': 'powerpoint_avance',
        'tic_powerpoint': 'powerpoint_total',
        
        // Internet/Autres
        'autres_aucun': 'autres_aucun',
        'autres_faible': 'autres_faible',
        'autres_moyen': 'autres_moyen',
        'autres_avance': 'autres_avance',
        'tic_internet': 'autres_total'
      };
      
      // Appliquer le mapping
      Object.keys(data).forEach(backendKey => {
        const frontendKey = mapping[backendKey];
        if (frontendKey) {
          reversed[frontendKey] = data[backendKey];
        }
      });
      
      return reversed;
    }

    // Reverse mapping pour Section 6: Infrastructures + Mat√©riels + Mobilier + √âquipements + Manuels
    // Backend: XXX_bon_etat ‚Üí Frontend: infra_XXX_bon (ou materiel_, mobilier_, equipement_, manuel_)
    function reverseMappingSection7(data) {
      // Section 7: Budget/Finances
      // Mod√®le ‚Üí HTML
      console.log('[REVERSE7] Donn√©es re√ßues du backend:', data);
      
      const mapping = {
        'subvention_etat_montant': 'finance_etat_montant',
        'partenaires_montant': 'finance_partenaires_montant',
        'collectivite_locale_montant': 'finance_collectivites_montant',
        'contrib_parents_montant': 'finance_communaute_montant',
        'autres_sources_montant': 'finance_ressources_montant',
      };
      
      const reversed = {};
      Object.keys(data).forEach(backendKey => {
        const frontendKey = mapping[backendKey] || backendKey;
        reversed[frontendKey] = data[backendKey];
        
        // Si montant > 0, cocher la checkbox correspondante
        if (backendKey.endsWith('_montant') && parseFloat(data[backendKey]) > 0) {
          const checkboxKey = frontendKey.replace('_montant', '_recu');
          reversed[checkboxKey] = true;
          console.log(`[REVERSE7] ${backendKey} (${data[backendKey]}) ‚Üí checkbox ${checkboxKey} = true`);
        }
      });
      
      console.log('[REVERSE7] Donn√©es apr√®s mapping:', reversed);
      return reversed;
    }

    function reverseMappingSection6(data) {
      const reversed = {};
      
      Object.keys(data).forEach(backendKey => {
        let frontendKey = backendKey;
        
        // Remplacer _bon_etat par _bon
        if (backendKey.endsWith('_bon_etat')) {
          frontendKey = backendKey.replace('_bon_etat', '_bon');
        }
        
        // D√©terminer le pr√©fixe bas√© sur le nom du champ
        // ORDRE IMPORTANT: v√©rifier les patterns les plus sp√©cifiques d'abord!
        
        // 1. Manuels √âl√®ves: eleve_lc_*, eleve_maths_*, eleve_edd_*, eleve_dm_*
        if (backendKey.match(/^eleve_(lc_|maths_|edd_|dm_)/)) {
          frontendKey = 'manuel_' + frontendKey;
        }
        // 2. Infrastructures: salles_, abris_, bloc_, bureaux_, magasins_, etc.
        else if (backendKey.match(/^(salles_|abris_|bloc_|bureaux_|magasins_|salle_|cuisines_|refectoires_|toilettes_|infirmeries_|points_|puits_|forages_|logements_|terrains_|mats_|clotures_|arbres_|jardins_|fosses_|panneaux_)/)) {
          frontendKey = 'infra_' + frontendKey;
        }
        // 3. Mat√©riels Didactiques: tableaux, livres_, guides_, cahiers_, atlas, cartes_, geometrique_, calcul_, sciences_, eps_, dessin_, experimentation_, manipulation_, images_
        else if (backendKey.match(/^(tableaux|livres_|guides_|cahiers_|atlas|cartes_|equerres|compas|globes|geometrique|calcul|sciences|eps|instruments_|dessin|images_|experimentation|manipulation)/)) {
          frontendKey = 'materiel_' + frontendKey;
        }
        // 4. Mobilier Scolaire: tables_, chaises_, armoires, bibliotheques, fauteuils, banquettes, batteries_, autres
        else if (backendKey.match(/^(tables_|chaises_|armoires|bibliotheques|fauteuils|banquettes|batteries_|autres)/)) {
          frontendKey = 'mobilier_' + frontendKey;
        }
        // 5. √âquipements Informatiques: ordinateurs_, tablettes, imprimantes, photocopieuses, videoprojecteurs, routeurs, cles_, disques_
        else if (backendKey.match(/^(ordinateurs_|tablettes|imprimantes|photocopieuses|videoprojecteurs|routeurs|cles_|disques_)/)) {
          frontendKey = 'equipement_' + frontendKey;
        }
        
        reversed[frontendKey] = data[backendKey];
      });
      
      return reversed;
    }

    function mettreAJourProgression() {
      fetch('/api/formulaire/charger/', {
        method: 'GET',
        headers: {
          'X-CSRFToken': csrftoken,
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Calculer combien de sections ont des donn√©es
          let sectionsRemplies = 0;
          const totalSections = 8;
          
          // Compter les sections avec donn√©es
          ['section_1', 'section_2', 'section_3', 'section_4', 'section_5', 'section_6', 'section_7', 'section_8'].forEach(key => {
            if (data.data[key] && Object.keys(data.data[key]).length > 2) {
              sectionsRemplies++;
            }
          });
          
          // Calculer pourcentage
          const progression = Math.round((sectionsRemplies / totalSections) * 100);
          
          // Mettre √† jour l'UI
          const barreProgression = document.querySelector('.bg-green-400');
          const texteProgression = barreProgression.parentElement.nextElementSibling;
          
          if (barreProgression && texteProgression) {
            barreProgression.style.width = progression + '%';
            texteProgression.textContent = progression + '%';
          }
          
          console.log(`üìä Progression: ${sectionsRemplies}/${totalSections} sections (${progression}%)`);
        }
      })
      .catch(error => {
        console.error('Erreur mise √† jour progression:', error);
      });
    }

    // Charger les donn√©es au d√©marrage
    function chargerDonnees() {
      fetch('/api/formulaire/charger/', {
        method: 'GET',
        headers: {
          'X-CSRFToken': csrftoken,
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          console.log('Donn√©es charg√©es:', data.data);
          remplirFormulaire(data.data);
          // Mettre √† jour la progression apr√®s chargement
          mettreAJourProgression();
        } else {
          console.error('Erreur API:', data.error);
        }
      })
      .catch(error => {
        console.error('Erreur lors du chargement:', error);
      });
    }

    // Remplir le formulaire avec les donn√©es charg√©es
    function remplirFormulaire(sections) {
      console.log('üîÑ Remplissage du formulaire...', sections);
      console.log('üìä Section 1 data:', sections.section_1);
      
      // Section 1: Informations Directeur (avec reverse mapping)
      if (sections.section_1) {
        const data = reverseMappingSection1(sections.section_1);
        console.log('üîÄ Apr√®s reverse mapping Section 1:', data);
        let remplis = 0;
        Object.keys(data).forEach(key => {
          // Chercher par name= OU id= (fallback)
          let element = document.querySelector(`[name="${key}"]`);
          if (!element) {
            element = document.getElementById(key);
          }
          
          if (element) {
            const value = data[key];
            if (element.type === 'checkbox') {
              // Checkbox: cocher UNIQUEMENT si la valeur est vraiment true, "Oui", "oui", ou 1
              // NE PAS cocher pour 0, "0", "", null, undefined, false
              if (value === true || value === 1 || value === '1' || value === 'Oui' || value === 'oui') {
                element.checked = true;
                // D√©clencher l'√©v√©nement change pour activer les affichages conditionnels
                element.dispatchEvent(new Event('change'));
              } else {
                element.checked = false;
              }
            } else if (element.type === 'radio') {
              if (value !== null && value !== undefined && value !== '' && value !== 0 && value !== '0') {
                const radio = document.querySelector(`[name="${key}"][value="${value}"]`);
                if (radio) radio.checked = true;
              }
            } else {
              // Pour les inputs texte/number : ne remplir que si la valeur n'est pas 0 ou "0"
              if (value !== null && value !== undefined && value !== 0 && value !== '0' && value !== '') {
                element.value = value;
              } else {
                element.value = '';
              }
            }
          }
        });
      }

      // Section 2: Structures Associatives (avec reverse mapping)
      if (sections.section_2) {
        const data = reverseMappingSection2(sections.section_2);
        Object.keys(data).forEach(key => {
          let element = document.querySelector(`[name="${key}"]`);
          if (!element) {
            element = document.getElementById(key);
          }
          
          if (element) {
            const value = data[key];
            if (element.type === 'checkbox') {
              // Checkbox: cocher UNIQUEMENT si valeur = true, 1, "1", "Oui" ou "oui"
              if (value === true || value === 1 || value === '1' || value === 'Oui' || value === 'oui') {
                element.checked = true;
                element.dispatchEvent(new Event('change'));
              } else {
                element.checked = false;
              }
            } else {
              // Input texte/number : ne remplir que si non vide/non z√©ro
              if (value !== null && value !== undefined && value !== 0 && value !== '0' && value !== '') {
                element.value = value;
              } else {
                element.value = '';
              }
            }
          }
        });
      }

      // Section 3: Effectifs √âl√®ves (avec reverse mapping)
      if (sections.section_3) {
        const data = reverseMappingSection3(sections.section_3);
        Object.keys(data).forEach(key => {
          let element = document.querySelector(`[name="${key}"]`);
          if (!element) {
            element = document.getElementById(key);
          }
          
          if (element) {
            const value = data[key];
            if (element.type === 'checkbox') {
              // Checkbox: cocher UNIQUEMENT si valeur vraiment active
              if (value === true || value === 1 || value === '1' || value === 'Oui' || value === 'oui') {
                element.checked = true;
                element.dispatchEvent(new Event('change'));
              } else {
                element.checked = false;
              }
            } else if (element.type === 'radio') {
              if (value !== null && value !== undefined && value !== '' && value !== 0 && value !== '0') {
                const radio = document.querySelector(`[name="${key}"][value="${value}"]`);
                if (radio) radio.checked = true;
              }
            } else {
              // Input : ne remplir que si valeur significative
              if (value !== null && value !== undefined && value !== 0 && value !== '0' && value !== '') {
                element.value = value;
              } else {
                element.value = '';
              }
            }
          }
        });
      }

      // Sections 4-8: Pas encore de mapping (√† impl√©menter)
      ['section_4', 'section_5', 'section_6', 'section_7', 'section_8'].forEach(sectionKey => {
        if (sections[sectionKey]) {
          // Sections 4, 5, 6, 7: Utiliser le reverse mapping
          let dataToFill = sections[sectionKey];
          if (sectionKey === 'section_4') {
            dataToFill = reverseMappingSection4(sections[sectionKey]);
          } else if (sectionKey === 'section_5') {
            dataToFill = reverseMappingSection5(sections[sectionKey]);
          } else if (sectionKey === 'section_6') {
            dataToFill = reverseMappingSection6(sections[sectionKey]);
          } else if (sectionKey === 'section_7') {
            dataToFill = reverseMappingSection7(sections[sectionKey]);
          }
          
          Object.keys(dataToFill).forEach(key => {
            let element = document.querySelector(`[name="${key}"]`);
            if (!element) {
              element = document.getElementById(key);
            }
            
            if (element) {
              const value = dataToFill[key];
              if (element.type === 'checkbox') {
                if (value !== null && value !== undefined) {
                  element.checked = Boolean(value);
                  // D√©clencher l'√©v√©nement change pour activer les affichages conditionnels
                  element.dispatchEvent(new Event('change'));
                }
              } else if (element.type === 'radio') {
                if (value !== null && value !== undefined) {
                  const radio = document.querySelector(`[name="${key}"][value="${value}"]`);
                  if (radio) radio.checked = true;
                }
              } else {
                element.value = value || '';
              }
            }
          });
        }
      });

      console.log('‚úÖ Formulaire rempli avec succ√®s');
      
      // NOUVEAU: Recalculer les totaux apr√®s remplissage
      recalculerTousLesTotaux();
      
      // Recalculer le total des classes (Section 3)
      if (typeof calculateTotalClasses === 'function') calculateTotalClasses();
      
      // Recalculer les totaux de la Section 5 (Personnel)
      recalculerTotauxPersonnel();
      
      // Recalculer les totaux pour Recrutement CI
      recalculerRecrutementCI();
      
      // Recalculer les taux de r√©ussite pour la Section 4
      if (typeof calculateCFEETaux === 'function') calculateCFEETaux();
      if (typeof calculateEntree6Taux === 'function') calculateEntree6Taux();
      
      // Recalculer le total des finances (Section 7) - FORCER le calcul m√™me si section cach√©e
      setTimeout(() => {
        console.log('üîÑ Calcul forc√© du total finances...');
        
        // Calculer le total directement depuis les donn√©es charg√©es
        const section7Data = sections.section_7;
        if (section7Data) {
          let total = 0;
          
          // Extraire les montants directement des donn√©es
          if (section7Data.subvention_etat_montant) {
            total += parseFloat(section7Data.subvention_etat_montant) || 0;
          }
          if (section7Data.partenaires_montant) {
            total += parseFloat(section7Data.partenaires_montant) || 0;
          }
          if (section7Data.collectivite_locale_montant) {
            total += parseFloat(section7Data.collectivite_locale_montant) || 0;
          }
          if (section7Data.contrib_parents_montant) {
            total += parseFloat(section7Data.contrib_parents_montant) || 0;
          }
          if (section7Data.autres_sources_montant) {
            total += parseFloat(section7Data.autres_sources_montant) || 0;
          }
          
          console.log(`üí∞ Total calcul√© depuis les donn√©es: ${total}`);
          
          // Afficher le total
          const totalElement = document.getElementById('finance_total');
          if (totalElement) {
            totalElement.textContent = total.toLocaleString('fr-FR');
            console.log(`‚úÖ Total affich√©: ${total.toLocaleString('fr-FR')}`);
          }
        }
        
        // Aussi appeler calculateFinanceTotal() pour synchroniser
        if (typeof calculateFinanceTotal === 'function') {
          calculateFinanceTotal();
        }
      }, 1000);  // D√©lai de 1 seconde pour √™tre s√ªr
      
      // Recalculer le total des classes (Section 3) - FORCER le calcul
      setTimeout(() => {
        console.log('üî¢ Calcul forc√© du total des classes...');
        
        const section3Data = sections.section_3;
        if (section3Data) {
          let totalClasses = 0;
          const niveaux = ['ci', 'cp', 'ce1', 'ce2', 'cm1', 'cm2'];
          
          // Calculer directement depuis les donn√©es
          niveaux.forEach(niveau => {
            const nombreClasses = section3Data[`${niveau}_nombre_classes`];
            if (nombreClasses) {
              totalClasses += parseInt(nombreClasses) || 0;
              console.log(`  ${niveau}: ${nombreClasses}`);
            }
          });
          
          console.log(`üìä Total classes calcul√©: ${totalClasses}`);
          
          // Afficher le total
          const totalElement = document.getElementById('nbre_classes_total');
          if (totalElement) {
            totalElement.value = totalClasses;
            console.log(`‚úÖ Total classes affich√©: ${totalClasses}`);
          }
        }
        
        // Aussi appeler calculateTotalClasses() pour synchroniser
        if (typeof calculateTotalClasses === 'function') {
          calculateTotalClasses();
        }
      }, 1000);
    }
    
    // Fonction pour recalculer les totaux du Recrutement CI
    function recalculerRecrutementCI() {
      // Recrutement Mai
      const maiG = parseInt(document.getElementById('recrutement_ci_mai_g')?.value) || 0;
      const maiF = parseInt(document.getElementById('recrutement_ci_mai_f')?.value) || 0;
      const maiTotal = document.getElementById('recrutement_ci_mai_total');
      if (maiTotal) maiTotal.value = maiG + maiF;
      
      // Recrutement Octobre
      const octG = parseInt(document.getElementById('recrutement_ci_oct_g')?.value) || 0;
      const octF = parseInt(document.getElementById('recrutement_ci_oct_f')?.value) || 0;
      const octTotal = document.getElementById('recrutement_ci_oct_total');
      if (octTotal) octTotal.value = octG + octF;
    }
    
    // Fonction pour recalculer les totaux de la Section 5 (Personnel)
    function recalculerTotauxPersonnel() {
      // Liste des corps enseignants (utiliser les noms HTML)
      const corps = ['fr', 'arabe', 'i', 'id', 'ia', 'iad', 'mc', 'cap', 'ceap'];
      
      let totalHommes = 0;
      let totalFemmes = 0;
      
      // Calculer le total par ligne et les totaux g√©n√©raux
      corps.forEach(c => {
        const hInput = document.getElementById(`${c}_h`);
        const fInput = document.getElementById(`${c}_f`);
        const totalInput = document.getElementById(`${c}_total`);
        
        if (hInput && fInput) {
          const h = parseInt(hInput.value) || 0;
          const f = parseInt(fInput.value) || 0;
          const total = h + f;
          
          if (totalInput) {
            totalInput.value = total;
          }
          
          totalHommes += h;
          totalFemmes += f;
        }
      });
      
      // Mettre √† jour les totaux g√©n√©raux
      const totalHElement = document.getElementById('personnel_total_h');
      const totalFElement = document.getElementById('personnel_total_f');
      const totalGeneralElement = document.getElementById('personnel_total_general');
      
      if (totalHElement) totalHElement.textContent = totalHommes;
      if (totalFElement) totalFElement.textContent = totalFemmes;
      if (totalGeneralElement) totalGeneralElement.textContent = totalHommes + totalFemmes;
      
      // Recalculer les totaux TIC
      recalculerTotauxTIC();
    }
    
    // Fonction pour recalculer les totaux TIC (Section 5)
    function recalculerTotauxTIC() {
      const logiciels = ['word', 'excel', 'powerpoint', 'autres'];
      const niveaux = ['aucun', 'faible', 'moyen', 'avance'];
      
      logiciels.forEach(logiciel => {
        let total = 0;
        
        niveaux.forEach(niveau => {
          const input = document.getElementById(`${logiciel}_${niveau}`);
          if (input) {
            total += parseInt(input.value) || 0;
          }
        });
        
        const totalElement = document.getElementById(`${logiciel}_total`);
        if (totalElement) {
          totalElement.textContent = total;
        }
      });
    }

    // NOUVELLE FONCTION: Recalculer tous les totaux du formulaire
    function recalculerTousLesTotaux() {
      // Section 3: Totaux des effectifs
      const niveaux = ['ci', 'cp', 'ce1', 'ce2', 'cm1', 'cm2'];
      // Note: handi_autre RETIR√â car n'existe pas dans le mod√®le
      const types = ['eff', 'redoub', 'aban', 'handi_moteur', 'handi_visuel', 'handi_sm', 'handi_intel', 'orphelin', 'sans_extrait'];
      
      niveaux.forEach(niveau => {
        types.forEach(type => {
          const gInput = document.getElementById(`${niveau}_${type}_g`);
          const fInput = document.getElementById(`${niveau}_${type}_f`);
          const totalInput = document.getElementById(`${niveau}_${type}_total`) || document.getElementById(`${niveau}_${type}_tot`);
          
          if (gInput && fInput && totalInput) {
            const g = parseInt(gInput.value) || 0;
            const f = parseInt(fInput.value) || 0;
            totalInput.value = g + f;
          }
        });
      });
      
      // Recalculer les totaux g√©n√©raux (total_eff_g, total_eff_f, etc.)
      types.forEach(type => {
        let totalG = 0, totalF = 0;
        niveaux.forEach(niveau => {
          const gInput = document.getElementById(`${niveau}_${type}_g`);
          const fInput = document.getElementById(`${niveau}_${type}_f`);
          if (gInput) totalG += parseInt(gInput.value) || 0;
          if (fInput) totalF += parseInt(fInput.value) || 0;
        });
        
        const totalGInput = document.getElementById(`total_${type}_g`);
        const totalFInput = document.getElementById(`total_${type}_f`);
        const totalTotalInput = document.getElementById(`total_${type}_total`) || document.getElementById(`total_${type}_tot`);
        
        if (totalGInput) totalGInput.value = totalG;
        if (totalFInput) totalFInput.value = totalF;
        if (totalTotalInput) totalTotalInput.value = totalG + totalF;
      });
      
      console.log('‚úÖ Totaux recalcul√©s');
    }

    // Collecter les donn√©es de la section courante
    function collecterDonneesSection(sectionNum) {
      const sectionElement = document.getElementById(`section-${sectionNum}`);
      const formData = {};
      
      // Collecter tous les inputs, selects et textareas de la section
      const inputs = sectionElement.querySelectorAll('input, select, textarea');
      inputs.forEach(input => {
        const name = input.name || input.id;
        if (name) {
          if (input.type === 'checkbox') {
            formData[name] = input.checked;
          } else if (input.type === 'radio') {
            if (input.checked) {
              formData[name] = input.value;
            }
          } else if (input.type === 'number') {
            formData[name] = input.value ? parseInt(input.value) : 0;
          } else {
            formData[name] = input.value || '';
          }
        }
      });
      
      return formData;
    }

    // Sauvegarder la section courante
    function sauvegarder() {
      const donnees = collecterDonneesSection(currentSection);
      
      // Afficher indicateur de chargement
      const btn = event.target;
      const originalText = btn.innerHTML;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sauvegarde...';
      btn.disabled = true;
      
      fetch('/api/formulaire/sauvegarder/', {
        method: 'POST',
        headers: {
          'X-CSRFToken': csrftoken,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          section: currentSection,
          donnees: donnees
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Animation de succ√®s
          btn.innerHTML = '<i class="fas fa-check mr-2"></i>Sauvegard√© !';
          btn.classList.add('bg-green-600');
          
          // Mettre √† jour la barre de progression
          mettreAJourProgression();
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.classList.remove('bg-green-600');
            btn.disabled = false;
          }, 2000);
        } else {
          alert('‚ùå Erreur lors de la sauvegarde: ' + (data.error || 'Erreur inconnue'));
          btn.innerHTML = originalText;
          btn.disabled = false;
        }
      })
      .catch(error => {
        console.error('Erreur:', error);
        alert('‚ùå Erreur de connexion lors de la sauvegarde');
        btn.innerHTML = originalText;
        btn.disabled = false;
      });
    }

    // Sauvegarder silencieusement (sans feedback visuel, pour auto-save)
    function sauvegarderSilencieux(callback) {
      // SAUVEGARDER TOUTES LES SECTIONS, pas seulement la section active !
      const indicator = document.getElementById('autosave-indicator');
      indicator.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>Sauvegarde...</span>';
      indicator.className = 'flex items-center gap-1.5 text-[10px] text-yellow-300';
      
      // Collecter et sauvegarder chaque section qui a des donn√©es
      const promises = [];
      for (let section = 1; section <= 8; section++) {
        const donnees = collecterDonneesSection(section);
        if (Object.keys(donnees).length > 0) {
          promises.push(
            fetch('/api/formulaire/sauvegarder/', {
              method: 'POST',
              headers: {
                'X-CSRFToken': csrftoken,
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                section: section,
                donnees: donnees
              })
            })
            .then(response => response.json())
            .then(data => {
              if (data.success) {
                console.log(`‚úì Section ${section} auto-sauvegard√©e`);
                return true;
              } else {
                console.error(`Erreur auto-save section ${section}:`, data.error);
                return false;
              }
            })
          );
        }
      }
      
      // Attendre que toutes les sauvegardes soient termin√©es
      Promise.all(promises)
      .then(results => {
        const allSuccess = results.every(r => r === true);
        if (allSuccess) {
          // Indicateur succ√®s
          indicator.innerHTML = '<i class="fas fa-check-circle"></i><span>Sauvegard√©</span>';
          indicator.className = 'flex items-center gap-1.5 text-[10px] text-green-300';
          console.log('‚úÖ Toutes les sections sauvegard√©es');
        } else {
          // Indicateur erreur
          indicator.innerHTML = '<i class="fas fa-exclamation-circle"></i><span>Erreur</span>';
          indicator.className = 'flex items-center gap-1.5 text-[10px] text-red-300';
        }
        
        // Mettre √† jour la barre de progression
        mettreAJourProgression();
        
        if (callback) callback();
      })
      .catch(error => {
        console.error('Erreur auto-save:', error);
        // Indicateur erreur
        indicator.innerHTML = '<i class="fas fa-exclamation-circle"></i><span>Erreur r√©seau</span>';
        indicator.className = 'flex items-center gap-1.5 text-[10px] text-red-300';
        if (callback) callback(); // Continuer m√™me en cas d'erreur
      });
    }

    // Auto-save toutes les 30 secondes
    let autoSaveInterval = null;
    
    function demarrerAutoSave() {
      // Sauvegarder toutes les 30 secondes
      autoSaveInterval = setInterval(() => {
        console.log('üîÑ Auto-save d√©clench√©...');
        sauvegarderSilencieux();
      }, 30000); // 30 secondes
    }
    
    function arreterAutoSave() {
      if (autoSaveInterval) {
        clearInterval(autoSaveInterval);
        autoSaveInterval = null;
      }
    }

    // Soumettre le formulaire complet
    function soumettre() {
      // Modale de confirmation personnalis√©e
      const modalHTML = `
        <div id="confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="animation: fadeIn 0.2s;">
          <div class="bg-white rounded-lg shadow-2xl max-w-md w-full mx-4" style="animation: slideIn 0.3s;">
            <div class="bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4 rounded-t-lg">
              <h3 class="text-xl font-bold text-white flex items-center">
                <i class="fas fa-exclamation-triangle mr-3"></i>
                Confirmation de soumission
              </h3>
            </div>
            <div class="p-6">
              <p class="text-gray-700 mb-4">
                √ätes-vous s√ªr de vouloir soumettre le formulaire ?
              </p>
              <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
                <p class="text-sm text-yellow-800">
                  <i class="fas fa-info-circle mr-2"></i>
                  <strong>Attention :</strong> Apr√®s soumission, vous ne pourrez plus modifier les donn√©es. L'administrateur devra valider votre saisie.
                </p>
              </div>
            </div>
            <div class="bg-gray-50 px-6 py-4 rounded-b-lg flex justify-end gap-3">
              <button onclick="closeConfirmModal()" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg font-medium transition">
                <i class="fas fa-times mr-2"></i>Annuler
              </button>
              <button onclick="confirmSubmit()" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg font-medium transition shadow-lg">
                <i class="fas fa-check mr-2"></i>Confirmer
              </button>
            </div>
          </div>
        </div>
        <style>
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
          }
        </style>
      `;
      
      document.body.insertAdjacentHTML('beforeend', modalHTML);
    }
    
    function closeConfirmModal() {
      const modal = document.getElementById('confirm-modal');
      if (modal) modal.remove();
    }
    
    function confirmSubmit() {
      closeConfirmModal();
      
      const btn = document.getElementById('btn-submit');
      const originalText = btn.innerHTML;
      btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Sauvegarde en cours...';
      btn.disabled = true;
        
        // √âTAPE 1: Sauvegarder TOUTES les sections avant soumission
        const sectionsSave = [];
        for (let i = 1; i <= 8; i++) {
          const donnees = collecterDonneesSection(i);
          if (Object.keys(donnees).length > 0) {
            sectionsSave.push(
              fetch('/api/formulaire/sauvegarder/', {
                method: 'POST',
                headers: {
                  'X-CSRFToken': csrftoken,
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                  section: i,
                  donnees: donnees
                })
              })
            );
          }
        }
        
        // Attendre que toutes les sections soient sauvegard√©es
        Promise.all(sectionsSave)
          .then(() => {
            console.log('‚úì Toutes les sections sauvegard√©es');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Soumission...';
            
            // √âTAPE 2: Soumettre le formulaire
            return fetch('/api/formulaire/soumettre/', {
              method: 'POST',
              headers: {
                'X-CSRFToken': csrftoken,
                'Content-Type': 'application/json'
              }
            });
          })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Modale de succ√®s personnalis√©e
            const successModal = `
              <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="animation: fadeIn 0.2s;">
                <div class="bg-white rounded-lg shadow-2xl max-w-md w-full mx-4" style="animation: slideIn 0.3s;">
                  <div class="bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-4 rounded-t-lg">
                    <h3 class="text-xl font-bold text-white flex items-center">
                      <i class="fas fa-check-circle mr-3"></i>
                      Soumission r√©ussie !
                    </h3>
                  </div>
                  <div class="p-6 text-center">
                    <div class="mb-4">
                      <i class="fas fa-check-circle text-green-500 text-6xl"></i>
                    </div>
                    <p class="text-gray-700 mb-4 font-medium">
                      Votre formulaire a √©t√© soumis avec succ√®s !
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 text-left">
                      <p class="text-sm text-blue-800">
                        <i class="fas fa-info-circle mr-2"></i>
                        Vos donn√©es ont √©t√© transmises √† l'administration pour validation. Vous serez notifi√© une fois la validation effectu√©e.
                      </p>
                    </div>
                  </div>
                  <div class="bg-gray-50 px-6 py-4 rounded-b-lg flex justify-center">
                    <button onclick="window.location.href='{% url 'etablissement_formulaire' %}'" class="px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800 text-white rounded-lg font-medium transition shadow-lg">
                      <i class="fas fa-home mr-2"></i>Retour √† l'accueil
                    </button>
                  </div>
                </div>
              </div>
            `;
            document.body.insertAdjacentHTML('beforeend', successModal);
          } else {
            // Modale d'erreur personnalis√©e
            const errorModal = `
              <div id="error-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="animation: fadeIn 0.2s;">
                <div class="bg-white rounded-lg shadow-2xl max-w-md w-full mx-4" style="animation: slideIn 0.3s;">
                  <div class="bg-gradient-to-r from-red-500 to-red-600 px-6 py-4 rounded-t-lg">
                    <h3 class="text-xl font-bold text-white flex items-center">
                      <i class="fas fa-times-circle mr-3"></i>
                      Erreur de soumission
                    </h3>
                  </div>
                  <div class="p-6">
                    <div class="mb-4 text-center">
                      <i class="fas fa-exclamation-triangle text-red-500 text-6xl"></i>
                    </div>
                    <p class="text-gray-700 mb-4">
                      Une erreur s'est produite lors de la soumission :
                    </p>
                    <div class="bg-red-50 border-l-4 border-red-400 p-4">
                      <p class="text-sm text-red-800">
                        ${data.error || 'Erreur inconnue'}
                      </p>
                    </div>
                  </div>
                  <div class="bg-gray-50 px-6 py-4 rounded-b-lg flex justify-center">
                    <button onclick="document.getElementById('error-modal').remove()" class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition">
                      <i class="fas fa-times mr-2"></i>Fermer
                    </button>
                  </div>
                </div>
              </div>
            `;
            document.body.insertAdjacentHTML('beforeend', errorModal);
            btn.innerHTML = originalText;
            btn.disabled = false;
          }
        })
        .catch(error => {
          console.error('Erreur:', error);
          const errorModal = `
            <div id="error-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="animation: fadeIn 0.2s;">
              <div class="bg-white rounded-lg shadow-2xl max-w-md w-full mx-4" style="animation: slideIn 0.3s;">
                <div class="bg-gradient-to-r from-red-500 to-red-600 px-6 py-4 rounded-t-lg">
                  <h3 class="text-xl font-bold text-white flex items-center">
                    <i class="fas fa-times-circle mr-3"></i>
                    Erreur de connexion
                  </h3>
                </div>
                <div class="p-6">
                  <div class="mb-4 text-center">
                    <i class="fas fa-wifi text-red-500 text-6xl" style="transform: scaleX(-1);"></i>
                  </div>
                  <p class="text-gray-700 mb-4">
                    Impossible de se connecter au serveur
                  </p>
                  <div class="bg-red-50 border-l-4 border-red-400 p-4">
                    <p class="text-sm text-red-800">
                      V√©rifiez votre connexion internet et r√©essayez.
                    </p>
                  </div>
                </div>
                <div class="bg-gray-50 px-6 py-4 rounded-b-lg flex justify-center">
                  <button onclick="document.getElementById('error-modal').remove()" class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition">
                    <i class="fas fa-times mr-2"></i>Fermer
                  </button>
                </div>
              </div>
            </div>
          `;
          document.body.insertAdjacentHTML('beforeend', errorModal);
          btn.innerHTML = originalText;
          btn.disabled = false;
        });
    }

    function quitter() {
      if (confirm('‚ö†Ô∏è √ätes-vous s√ªr de vouloir quitter ?\n\nPensez √† sauvegarder vos modifications avant de quitter.')) {
        window.location.href = "{% url 'etablissement_login' %}";
      }
    }

    // Charger les donn√©es et initialiser les √©v√©nements au d√©marrage de la page
    document.addEventListener('DOMContentLoaded', function() {
      // Charger les donn√©es depuis le backend
      chargerDonnees();
      
      // D√©marrer l'auto-save toutes les 30 secondes
      demarrerAutoSave();
      console.log('‚úì Auto-save activ√© (toutes les 30 secondes)');
      
      // Gestion des checkboxes avec affichage/masquage des d√©tails
      // CPE
      document.getElementById('cpe_existe').addEventListener('change', function() {
        document.getElementById('cpe_details').classList.toggle('hidden', !this.checked);
      });

      // Cl√¥ture
      document.getElementById('cloture').addEventListener('change', function() {
        document.getElementById('cloture_details').classList.toggle('hidden', !this.checked);
      });

      // Eau
      document.getElementById('eau').addEventListener('change', function() {
        document.getElementById('eau_details').classList.toggle('hidden', !this.checked);
      });

      // √âlectricit√©
      document.getElementById('electricite').addEventListener('change', function() {
        document.getElementById('electricite_details').classList.toggle('hidden', !this.checked);
      });

      // Internet
      document.getElementById('connexion_internet').addEventListener('change', function() {
        document.getElementById('internet_details').classList.toggle('hidden', !this.checked);
      });

      // Cantine
      document.getElementById('cantine_scolaire').addEventListener('change', function() {
        document.getElementById('cantine_details').classList.toggle('hidden', !this.checked);
      });

      // Projets
      document.getElementById('existence_projets').addEventListener('change', function() {
        document.getElementById('projets_details').classList.toggle('hidden', !this.checked);
      });

      // ===== SECTION 2: ORGANISATIONS =====
      // CGE
      document.getElementById('cge').addEventListener('change', function() {
        document.getElementById('cge_content').classList.toggle('hidden', !this.checked);
      });
      document.getElementById('cge_h').addEventListener('input', function() {
        const h = parseInt(this.value) || 0;
        const f = parseInt(document.getElementById('cge_f').value) || 0;
        document.getElementById('cge_total').value = h + f;
      });
      document.getElementById('cge_f').addEventListener('input', function() {
        const h = parseInt(document.getElementById('cge_h').value) || 0;
        const f = parseInt(this.value) || 0;
        document.getElementById('cge_total').value = h + f;
      });

      // Gouvernement Scolaire
      document.getElementById('g_scol').addEventListener('change', function() {
        document.getElementById('g_scol_content').classList.toggle('hidden', !this.checked);
      });
      document.getElementById('g_scol_h').addEventListener('input', function() {
        const h = parseInt(this.value) || 0;
        const f = parseInt(document.getElementById('g_scol_f').value) || 0;
        document.getElementById('g_scol_total').value = h + f;
      });
      document.getElementById('g_scol_f').addEventListener('input', function() {
        const h = parseInt(document.getElementById('g_scol_h').value) || 0;
        const f = parseInt(this.value) || 0;
        document.getElementById('g_scol_total').value = h + f;
      });

      // APE
      document.getElementById('ape').addEventListener('change', function() {
        document.getElementById('ape_content').classList.toggle('hidden', !this.checked);
      });
      document.getElementById('ape_h').addEventListener('input', function() {
        const h = parseInt(this.value) || 0;
        const f = parseInt(document.getElementById('ape_f').value) || 0;
        document.getElementById('ape_total').value = h + f;
      });
      document.getElementById('ape_f').addEventListener('input', function() {
        const h = parseInt(document.getElementById('ape_h').value) || 0;
        const f = parseInt(this.value) || 0;
        document.getElementById('ape_total').value = h + f;
      });

      // AME
      document.getElementById('ame').addEventListener('change', function() {
        document.getElementById('ame_content').classList.toggle('hidden', !this.checked);
      });

      // ===== SECTION 3: EFFECTIFS =====
      // Calcul du nombre total de classes
      const classeInputs = ['ci', 'cp', 'ce1', 'ce2', 'cm1', 'cm2'];
      classeInputs.forEach(niveau => {
        document.getElementById(`nbre_classes_${niveau}`).addEventListener('input', calculateTotalClasses);
      });

      function calculateTotalClasses() {
        let total = 0;
        classeInputs.forEach(niveau => {
          total += parseInt(document.getElementById(`nbre_classes_${niveau}`).value) || 0;
        });
        document.getElementById('nbre_classes_total').value = total;
      }

      // Calcul des effectifs par niveau
      const niveaux = ['ci', 'cp', 'ce1', 'ce2', 'cm1', 'cm2'];
      const categories = ['eff', 'redoub', 'aban'];

      niveaux.forEach(niveau => {
        categories.forEach(cat => {
          ['g', 'f'].forEach(genre => {
            const input = document.getElementById(`${niveau}_${cat}_${genre}`);
            if (input) {
              input.addEventListener('input', () => calculateRowTotal(niveau, cat));
            }
          });
        });
      });

      function calculateRowTotal(niveau, category) {
        const g = parseInt(document.getElementById(`${niveau}_${category}_g`).value) || 0;
        const f = parseInt(document.getElementById(`${niveau}_${category}_f`).value) || 0;
        document.getElementById(`${niveau}_${category}_total`).value = g + f;
        calculateColumnTotals();
      }

      function calculateColumnTotals() {
        categories.forEach(cat => {
          let totalG = 0, totalF = 0, totalT = 0;
          niveaux.forEach(niveau => {
            totalG += parseInt(document.getElementById(`${niveau}_${cat}_g`).value) || 0;
            totalF += parseInt(document.getElementById(`${niveau}_${cat}_f`).value) || 0;
            totalT += parseInt(document.getElementById(`${niveau}_${cat}_total`).value) || 0;
          });
          document.getElementById(`total_${cat}_g`).value = totalG;
          document.getElementById(`total_${cat}_f`).value = totalF;
          document.getElementById(`total_${cat}_total`).value = totalT;
        });
      }

      // Calcul des situations particuli√®res
      const situationsParticulieres = ['handi_moteur', 'handi_visuel', 'handi_sm', 'handi_intel', 'handi_autre', 'orphelin', 'sans_extrait'];
      
      niveaux.forEach(niveau => {
        situationsParticulieres.forEach(situation => {
          ['g', 'f'].forEach(genre => {
            const input = document.getElementById(`${niveau}_${situation}_${genre}`);
            if (input) {
              input.addEventListener('input', () => {
                const g = parseInt(document.getElementById(`${niveau}_${situation}_g`).value) || 0;
                const f = parseInt(document.getElementById(`${niveau}_${situation}_f`).value) || 0;
                document.getElementById(`${niveau}_${situation}_tot`).value = g + f;
              });
            }
          });
        });
      });

      // ===== SECTION 4: EXAMENS =====
      // Recrutement CI - Mai
      document.getElementById('recrutement_ci_mai_g').addEventListener('input', function() {
        const g = parseInt(this.value) || 0;
        const f = parseInt(document.getElementById('recrutement_ci_mai_f').value) || 0;
        document.getElementById('recrutement_ci_mai_total').value = g + f;
      });
      document.getElementById('recrutement_ci_mai_f').addEventListener('input', function() {
        const g = parseInt(document.getElementById('recrutement_ci_mai_g').value) || 0;
        const f = parseInt(this.value) || 0;
        document.getElementById('recrutement_ci_mai_total').value = g + f;
      });

      // Recrutement CI - Octobre
      document.getElementById('recrutement_ci_oct_g').addEventListener('input', function() {
        const g = parseInt(this.value) || 0;
        const f = parseInt(document.getElementById('recrutement_ci_oct_f').value) || 0;
        document.getElementById('recrutement_ci_oct_total').value = g + f;
      });
      document.getElementById('recrutement_ci_oct_f').addEventListener('input', function() {
        const g = parseInt(document.getElementById('recrutement_ci_oct_g').value) || 0;
        const f = parseInt(this.value) || 0;
        document.getElementById('recrutement_ci_oct_total').value = g + f;
      });

      // CMG - Nombre de classes
      document.getElementById('cmg_nombre').addEventListener('input', function() {
        const nombre = parseInt(this.value) || 0;
        const infoDiv = document.getElementById('cmg_info');
        if (nombre > 0) {
          document.getElementById('cmg_nombre_text').textContent = nombre;
          infoDiv.classList.remove('hidden');
        } else {
          infoDiv.classList.add('hidden');
        }
      });

      // CFEE - Calcul des taux
      function calculateCFEETaux() {
        const candidatsTotal = parseInt(document.getElementById('cfee_candidats_total').value) || 0;
        const candidatsFilles = parseInt(document.getElementById('cfee_candidats_filles').value) || 0;
        const admisTotal = parseInt(document.getElementById('cfee_admis_total').value) || 0;
        const admisFilles = parseInt(document.getElementById('cfee_admis_filles').value) || 0;

        const tauxDiv = document.getElementById('cfee_taux');
        
        if (candidatsTotal > 0) {
          const tauxGeneral = ((admisTotal / candidatsTotal) * 100).toFixed(1);
          document.getElementById('cfee_taux_general').textContent = tauxGeneral + '%';
          
          if (candidatsFilles > 0) {
            const tauxFilles = ((admisFilles / candidatsFilles) * 100).toFixed(1);
            document.getElementById('cfee_taux_filles').textContent = tauxFilles + '%';
            document.getElementById('cfee_taux_filles_block').classList.remove('hidden');
          } else {
            document.getElementById('cfee_taux_filles_block').classList.add('hidden');
          }
          
          tauxDiv.classList.remove('hidden');
        } else {
          tauxDiv.classList.add('hidden');
        }
      }

      ['cfee_candidats_total', 'cfee_candidats_filles', 'cfee_admis_total', 'cfee_admis_filles'].forEach(id => {
        document.getElementById(id).addEventListener('input', calculateCFEETaux);
      });

      // Entr√©e 6√®me - Calcul des taux
      function calculateEntree6Taux() {
        const candidatsTotal = parseInt(document.getElementById('entree6_candidats_total').value) || 0;
        const candidatsFilles = parseInt(document.getElementById('entree6_candidats_filles').value) || 0;
        const admisTotal = parseInt(document.getElementById('entree6_admis_total').value) || 0;
        const admisFilles = parseInt(document.getElementById('entree6_admis_filles').value) || 0;

        const tauxDiv = document.getElementById('entree6_taux');
        
        if (candidatsTotal > 0) {
          const tauxGeneral = ((admisTotal / candidatsTotal) * 100).toFixed(1);
          document.getElementById('entree6_taux_general').textContent = tauxGeneral + '%';
          
          if (candidatsFilles > 0) {
            const tauxFilles = ((admisFilles / candidatsFilles) * 100).toFixed(1);
            document.getElementById('entree6_taux_filles').textContent = tauxFilles + '%';
            document.getElementById('entree6_taux_filles_block').classList.remove('hidden');
          } else {
            document.getElementById('entree6_taux_filles_block').classList.add('hidden');
          }
          
          tauxDiv.classList.remove('hidden');
        } else {
          tauxDiv.classList.add('hidden');
        }
      }

      ['entree6_candidats_total', 'entree6_candidats_filles', 'entree6_admis_total', 'entree6_admis_filles'].forEach(id => {
        document.getElementById(id).addEventListener('input', calculateEntree6Taux);
      });

      // ============================================================
      // SECTION 5: PERSONNEL - Calculs automatiques
      // ============================================================
      
      // Calcul automatique H + F = Total pour chaque corps
      const corpsEnseignants = ['fr', 'arabe', 'i', 'id', 'ia', 'iad', 'mc', 'cap', 'ceap'];
      
      corpsEnseignants.forEach(corps => {
        const inputH = document.getElementById(`${corps}_h`);
        const inputF = document.getElementById(`${corps}_f`);
        const outputTotal = document.getElementById(`${corps}_total`);
        
        if (inputH && inputF && outputTotal) {
          inputH.addEventListener('input', () => calculatePersonnelRowTotal(corps));
          inputF.addEventListener('input', () => calculatePersonnelRowTotal(corps));
        }
      });
      
      function calculatePersonnelRowTotal(corps) {
        const h = parseInt(document.getElementById(`${corps}_h`).value) || 0;
        const f = parseInt(document.getElementById(`${corps}_f`).value) || 0;
        document.getElementById(`${corps}_total`).value = h + f;
        calculatePersonnelGeneralTotals();
      }
      
      // Calcul des totaux g√©n√©raux (somme de toutes les lignes)
      function calculatePersonnelGeneralTotals() {
        let totalH = 0;
        let totalF = 0;
        
        corpsEnseignants.forEach(corps => {
          totalH += parseInt(document.getElementById(`${corps}_h`).value) || 0;
          totalF += parseInt(document.getElementById(`${corps}_f`).value) || 0;
        });
        
        document.getElementById('personnel_total_h').textContent = totalH;
        document.getElementById('personnel_total_f').textContent = totalF;
        document.getElementById('personnel_total_general').textContent = totalH + totalF;
      }
      
      // Calcul automatique des totaux par logiciel TIC
      const logicielsTIC = ['word', 'excel', 'powerpoint', 'autres'];
      const niveauxTIC = ['aucun', 'faible', 'moyen', 'avance'];
      
      logicielsTIC.forEach(logiciel => {
        niveauxTIC.forEach(niveau => {
          const input = document.getElementById(`${logiciel}_${niveau}`);
          if (input) {
            input.addEventListener('input', () => calculateTICTotal(logiciel));
          }
        });
      });
      
      function calculateTICTotal(logiciel) {
        let total = 0;
        niveauxTIC.forEach(niveau => {
          total += parseInt(document.getElementById(`${logiciel}_${niveau}`).value) || 0;
        });
        document.getElementById(`${logiciel}_total`).textContent = total;
      }

      // ============================================================
      // SECTION 7: FINANCES - Affichage conditionnel et calculs
      // ============================================================
      
      const sourcesFinancement = ['etat', 'partenaires', 'collectivites', 'communaute', 'ressources'];
      
      sourcesFinancement.forEach(source => {
        const checkbox = document.getElementById(`finance_${source}_recu`);
        const details = document.getElementById(`finance_${source}_details`);
        const montantInput = document.getElementById(`finance_${source}_montant`);
        
        if (checkbox && details) {
          checkbox.addEventListener('change', function() {
            if (this.checked) {
              details.classList.remove('hidden');
            } else {
              details.classList.add('hidden');
              if (montantInput) {
                montantInput.value = 0;
                calculateFinanceTotal();
              }
            }
          });
        }
        
        if (montantInput) {
          montantInput.addEventListener('input', calculateFinanceTotal);
        }
      });
      
      function calculateFinanceTotal() {
        const sourcesFinancement = ['etat', 'partenaires', 'collectivites', 'communaute', 'ressources'];
        let total = 0;
        sourcesFinancement.forEach(source => {
          const element = document.getElementById(`finance_${source}_montant`);
          if (element) {
            const value = element.value;
            const montant = parseInt(value) || 0;
            console.log(`üí∞ Finance ${source}: ${value} ‚Üí ${montant}`);
            total += montant;
          } else {
            console.warn(`‚ö†Ô∏è Element finance_${source}_montant non trouv√©`);
          }
        });
        
        console.log(`üí∞ Total finances: ${total}`);
        
        // Formater le total avec s√©parateur de milliers
        const totalElement = document.getElementById('finance_total');
        if (totalElement) {
          totalElement.textContent = total.toLocaleString('fr-FR');
          console.log(`‚úÖ Total affich√©: ${total.toLocaleString('fr-FR')}`);
        } else {
          console.error('‚ùå Element finance_total non trouv√©!');
        }
      }

      // ============================================================
      // SECTION 8: OBSERVATIONS - Compteur de caract√®res
      // ============================================================
      
      const observationsTextarea = document.getElementById('observations');
      const observationCount = document.getElementById('observation_count');
      
      if (observationsTextarea && observationCount) {
        observationsTextarea.addEventListener('input', function() {
          const count = this.value.length;
          observationCount.textContent = count;
          
          // Changer la couleur selon le nombre de caract√®res
          if (count > 1800) {
            observationCount.classList.add('text-red-600', 'font-bold');
            observationCount.classList.remove('text-gray-500', 'text-orange-600');
          } else if (count > 1500) {
            observationCount.classList.add('text-orange-600', 'font-semibold');
            observationCount.classList.remove('text-gray-500', 'text-red-600');
          } else {
            observationCount.classList.add('text-gray-500');
            observationCount.classList.remove('text-orange-600', 'text-red-600', 'font-bold', 'font-semibold');
          }
        });
      }
    });
  </script>
</body>
</html>


